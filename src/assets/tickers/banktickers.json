[
    {
        "Name": "Innbetaling",
        "Code": "bank_list",
        "RequiredUIPermissions": ["ui_bank"],
        "Type": "Table",
        "IsTopLevelTicker": true,
        "Group": "Bank",
        "Model": "Payment",
        "OrderBy":"ID desc",
        "Joins": "Payment.JournalEntryID eq JournalEntry.ID and JournalEntry.ID eq FileEntityLink.EntityID",
        "Expand": "BusinessRelation,ToBankAccount,FromBankAccount",
        "Columns": [
            {
                "Header": "Fakturanr",
                "Field": "InvoiceNumber",
                "LinkNavigationProperty": "InvoiceNumber",
                "FilterOperator": "startswith"
            },
            {
                "Header": "Kunde",
                "Field": "BusinessRelation.Name",
                "FilterOperator": "contains"
            },
            {
                "Header": "Konto fra",
                "Field": "FromBankAccount.AccountNumber",
                "FilterOperator": "contains"
            },
            {
                "Header": "Konto til",
                "Field": "ToBankAccount.AccountNumber",
                "FilterOperator": "contains"
            },
            {
                "Header": "Innbetalings Dato",
                "Field": "PaymentDate",
                "FilterOperator": "eq",
                "Type" :"localdate"
            },
            {
                "Header": "KID",
                "Field": "PaymentID",
                "FilterOperator": "contains"
            },
            {
                "Header": "Innbetaling",
                "Field": "IsCustomerPayment",
                "FilterOperator": "contains",
                "DefaultHidden": false
            },
            {
                "Header": "Bel√∏p",
                "Field": "Amount",
                "FilterOperator": "contains",
                "SumColumn": true
            },
            {
                "Header": "Status",
                "Field": "StatusCode",
                "FilterOperator": "contains"
            },
            {
                "Header": "Bilagnr.",
                "Field": "JournalEntry.JournalEntryNumber",
                "ExternalModel": "JournalEntry",
                "FilterOperator": "contains",
                "LinkNavigationProperty": "JournalEntryID",
                "Type": "link"
            },
            {
                "Header": "Ekstern konto fra",
                "Field": "ExternalBankAccountNumber",
                "FilterOperator": "contains",
                "DefaultHidden": true,
                "SelectRequired": true
            },
            {
                "Header": "Beskrivelse",
                "Field": "Description",
                "FilterOperator": "contains",
                "DefaultHidden": true,
                "SelectRequired": true
            },
            {
                "Header": "üìé",
                "Field": "sum(casewhen(FileEntityLink.EntityType eq 'JournalEntry'\\,1\\,0))",
                "Alias": "Attachments",
                "Type": "attachment",
                "Width": "40px",
                "ExternalModel": "JournalEntry"
            }
        ],
        "Filters": [
            {
                "Name": "Alle",
                "Code": "bank_list",
                "UseAllCriterias": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "true"
                        }
                    ]
                }]
            },
            {
                "Name": "Innbetalt ingen match",
                "Code": "incomming_without_match",
                "UseAllCriterias": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "true"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "eq",
                            "Value": "44018"
                        }
                    ]
                }]
            },
            {
                "Name": "Innbetalt og bokf√∏rt",
                "Code": "incomming_and_journaled",
                "UseAllCriterias": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "true"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "eq",
                            "Value": "44004"
                        }
                    ]
                }]
            }
        ],
        "Actions": [
            {
                "Name": "Last ned betalingsfil",
                "Code": "download_file",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Velg faktura manuelt",
                "Code": "select_invoice",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Velg kunde manuelt",
                "Code": "select_customer",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Velg leverand√∏r manuelt",
                "Code": "select_supplier",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Velg hovedbokskonto manuelt",
                "Code": "select_main_account",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            }
        ],
        "SubTickersCodes": ["payment_details", "post_in_file", "payment_status_log"]
    },
    {
        "Name": "Utbetaling",
        "Code": "payment_list",
        "RequiredUIPermissions": ["ui_bank"],
        "Type": "Table",
        "IsTopLevelTicker": true,
        "EditToggle": false,
        "MultiRowSelect": true,
        "Group": "Bank",
        "Model": "Payment",
        "OrderBy":"ID desc",
        "Joins": "Payment.JournalEntryID eq JournalEntry.ID and JournalEntry.ID eq FileEntityLink.EntityID",
        "Expand": "BusinessRelation,ToBankAccount,FromBankAccount,PaymentCode",
        "Columns": [
            {
                "Header": "Betales til",
                "Field": "BusinessRelation.Name",
                "LinkNavigationProperty": "InvoiceNumber",
                "FilterOperator": "startswith"
            },
            {
                "Header": "Fakturanr",
                "Field": "InvoiceNumber",
                "LinkNavigationProperty": "InvoiceNumber",
                "FilterOperator": "startswith"
            },
            {
                "Header": "Konto fra",
                "Field": "FromBankAccount.AccountNumber",
                "FilterOperator": "contains",
                "SelectRequired": true
            },
            {
                "Header": "Konto til",
                "Field": "ToBankAccount.AccountNumber",
                "FilterOperator": "contains",
                "SelectRequired": true
            },
            {
                "Header": "KID",
                "Field": "PaymentID",
                "FilterOperator": "contains",
                "Alias": "PaymentID",
                "DisplayField": "PaymentID"
            },
            {
                "Header": "Betalingsinformasjon",
                "Field": "Description",
                "FilterOperator": "contains",
                "Alias": "Description",
                "DisplayField": "Description",
                "DefaultHidden": true
            },
            {
                "Header": "Kode",
                "Field": "PaymentCode.Code",
                "DefaultHidden": true,
                "SelectRequired": true
            },
            {
                "Header": "Type",
                "Field": "PaymentCode.Name",
                "DefaultHidden": false
            },
            {
                "Header": "Valutabel√∏p",
                "Field": "AmountCurrency",
                "FilterOperator": "contains",
                "SumColumn": true
            },
            {
                "Header": "Bel√∏p",
                "Field": "Amount",
                "FilterOperator": "contains",
                "Alias": "Amount",
                "DisplayField": "Amount",
                "SumColumn": true
            },
            {
                "Header": "Betalingsdato",
                "Field": "PaymentDate",
                "Type": "date",
                "FilterOperator": "contains",
                "Alias": "PaymentDate",
                "DisplayField": "PaymentDate"
            },
            {
                "Header": "Betalingsbunt",
                "Field": "PaymentBatchID",
                "Type": "id",
                "FilterOperator": "contains"
            },
            {
                "Header": "Statustekst",
                "Field": "StatusText",
                "FilterOperator": "contains",
                "ShowOnlyOnThisFilter": 4
            },
            {
                "Header": "Status",
                "Field": "StatusCode",
                "FilterOperator": "contains"
            },
            {
                "Header": "Bilagnr.",
                "Field": "JournalEntry.JournalEntryNumber",
                "ExternalModel": "JournalEntry",
                "FilterOperator": "contains",
                "LinkNavigationProperty": "JournalEntryID",
                "Type": "link"
            },
            {
                "Header": "Ekstern konto til",
                "Field": "ExternalBankAccountNumber",
                "FilterOperator": "contains",
                "DefaultHidden": true,
                "SelectRequired": true
            },
            {
                "Header": "üìé",
                "Field": "sum(casewhen(FileEntityLink.EntityType eq 'JournalEntry'\\,1\\,0))",
                "Alias": "Attachments",
                "Type": "attachment",
                "Width": "40px",
                "ExternalModel": "JournalEntry"
            }
        ],
        "Actions": [
            {
                "Name": "Last ned betalingsfil",
                "Code": "download_payment_file",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Endre betaling",
                "Code": "edit_payment",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Legg tilbake til ubetalt",
                "Code": "reset_payment",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Endre og legg tilbake til ubetalt",
                "Code": "reset_edit_payment",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Slett betaling",
                "Code": "remove_payment",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Manuell bokf√∏ring",
                "Code": "book_manual",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Velg kunde manuelt",
                "Code": "select_customer",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Velg leverand√∏r manuelt",
                "Code": "select_supplier",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Velg hovedbokskonto manuelt",
                "Code": "select_main_account",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            }
        ],
        "Filters": [
            {
                "Name": "Ubetalt",
                "Code": "not_payed",
                "UseAllCriterias": true,
                "IsMultiRowSelect": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "false"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "eq",
                            "Value": "44001"
                        }
                    ]
                }]
            },
            {
                "Name": "Overf√∏rt bank",
                "Code": "transferred_bank",
                "UseAllCriterias": true,
                "IsMultiRowSelect": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "false"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44001"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44003"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44004"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44006"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44010"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44012"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44013"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44014"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44018"
                        }
                    ]
                }]
            },
            {
                "Name": "Betalt ingen match",
                "Code": "payed_not_journaled",
                "UseAllCriterias": true,
                "IsMultiRowSelect": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "false"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "eq",
                            "Value": "44018"
                        }
                    ]
                }]
            },
            {
                "Name": "Betalt og fullf√∏rt",
                "Code": "payed_and_journaled",
                "UseAllCriterias": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "false"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "eq",
                            "Value": "44004"
                        }
                    ]
                }]
            },
            {
                "Name": "Avvist",
                "Code": "payment_list",
                "UseAllCriterias": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "false"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44001"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44002"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44004"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44005"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44006"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44007"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44008"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44009"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44011"
                        },
                        {
                            "Field": "StatusCode",
                            "Operator": "ne",
                            "Value": "44018"
                        }
                    ]
                }]
            }
        ],
        "SubTickersCodes": ["tracelink_table", "payment_details", "payment_status_log"]
    },
    {
        "Name": "Utbetalingbunter",
        "Code": "payment_batch_list",
        "RequiredUIPermissions": ["ui_bank"],
        "Type": "Table",
        "IsTopLevelTicker": true,
        "EditToggle": false,
        "MultiRowSelect": false,
        "OrderBy":"ID desc",
        "Group": "Bank",
        "Model": "PaymentBatch",
        "Columns": [
            {
                "Header": "ID",
                "Field": "ID",
                "Width": 80,
                "Alignment": "center",
                "FilterOperator": "contains",
                "DefaultHidden": false,
                "Resizeable" : false

            },
            {
                "Header": "Sum Bel√∏p",
                "Field": "TotalAmount",
                "FilterOperator": "contains",
                "DefaultHidden": false,
                "Type": "money"
            },
            {
                "Header": "Bilagsdato",
                "Field": "CreatedAt",
                "FilterOperator": "contains",
                "DefaultHidden": false,
                "Type": "date"
            },
            {
                "Header": "Antall poster",
                "Field": "NumberOfPayments",
                "FilterOperator": "contains",
                "DefaultHidden": false
            },
            {
                "Header": "Status",
                "Field": "StatusCode",
                "FilterOperator": "contains",
                "DefaultHidden": false
            }
        ],
        "Actions": [
            {
                "Name": "Last ned betalingsfil",
                "Code": "download_file",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            },
            {
                "Name": "Legg tilbake til ubetalt",
                "Code": "revert_batch",
                "Type": "action",
                "ExecuteWithMultipleSelections": false,
                "DisplayInContextMenu": true,
                "DisplayInActionBar": false,
                "NeedsActionOverride": true
            }
        ],
        "Filters": [
            {
                "Name": "Alle",
                "Code": "all_batches",
                "UseAllCriterias": true,
                "IsMultiRowSelect": true,
                "FilterGroups": [{
                    "UseAllCriterias": true,
                    "FieldFilters": [
                        {
                            "Field": "IsCustomerPayment",
                            "Operator": "eq",
                            "Value": "false"
                        }
                    ]
                }]
            }],
        "SubTickersCodes": ["payments_in_batch", "paymentBatch_status_log"]
    },
    {
        "Name": "Detaljer",
        "Type": "Details",
        "Code": "payment_details",
        "IsTopLevelTicker": false,
        "Group": "Bank",
        "Model": "PaymentBatch",
        "Expand": "",
        "SubTickers": [],
        "Filters": [],
        "UseParentTickerActions": true,
        "ParentFilter": {
            "Field": "ID",
            "Operator": "eq",
            "Value": "PaymentBatchID"
        },
        "Columns": [
            {
                "FieldSetColumn": 1,
                "Header": "Bilagsdato",
                "Field": "CreatedAt",
                "Type": "date"
            },
            {
                "FieldSetColumn": 2,
                "Header": "Mottatt fil",
                "Field": "ReceiptDate",
                "Type": "date"
            },
            {
                "FieldSetColumn": 1,
                "Header": "Sum fil",
                "Field": "TotalAmount",
                "Type": "number"
            },
            {
                "FieldSetColumn": 2,
                "Header": "Antall poster",
                "Field": "NumberOfPayments",
                "Type": "text"
            }
        ]
    },
    {
        "Name": "Poster i filen",
        "Type": "Table",
        "Code": "post_in_file",
        "IsTopLevelTicker": false,
        "Group": "Bank",
        "Model": "Payment",
        "Expand": "BusinessRelation,ToBankAccount,FromBankAccount",
        "UseParentTickerActions": true,
        "ParentFilter": {
            "Field": "PaymentBatchID",
            "Operator": "eq",
            "Value": "PaymentBatchID"
        },
        "Columns": [
            {
                "Header": "Fakturanr",
                "Field": "InvoiceNumber",
                "FilterOperator": "startswith"
            },
            {
                "Header": "Kunde",
                "Field": "BusinessRelation.Name",
                "FilterOperator": "contains"
            },
            {
                "Header": "Bel√∏p",
                "Field": "Amount",
                "FilterOperator": "contains",
                "SumColumn": true
            },
            {
                "Header": "KID",
                "Field": "PaymentID",
                "FilterOperator": "contains"
            }
        ]
    },
    {
        "Name": "Koblinger",
        "Type": "Table",
        "Code": "tracelink_table",
        "IsTopLevelTicker": false,
        "Group": "Bank",
        "Model": "Tracelink",
        "Expand": "",
        "SubTickers": [],
        "UseParentTickerActions": false,
        "ParentFilter": {
            "Field": "DestinationInstanceID",
            "Operator": "eq",
            "Value": "ID"
        },
        "Columns": [
            {
                "FieldSetColumn": 1,
                "Header": "Entitet",
                "Field": "SourceEntityName"
            },
            {
                "FieldSetColumn": 1,
                "Header": "ID",
                "Field": "SourceInstanceID",
                "Type": "Link",
                "ExternalModel": "SupplierInvoice",
                "LinkNavigationProperty": "SourceInstanceID"
            }
        ],
        "Filter": "DestinationEntityName eq 'Payment'"
    },
    {
        "Name": "Betalinger",
        "Type": "Table",
        "Code": "payments_in_batch",
        "IsTopLevelTicker": false,
        "Group": "Bank",
        "Model": "Payment",
        "Expand": "",
        "SubTickers": [],
        "UseParentTickerActions": false,
        "ParentFilter": {
            "Field": "PaymentBatchID",
            "Operator": "eq",
            "Value": "ID"
        },
        "Columns": [
            {
                "Header": "Betales til",
                "Field": "BusinessRelation.Name",
                "LinkNavigationProperty": "InvoiceNumber",
                "FilterOperator": "startswith"
            },
            {
                "Header": "KID",
                "Field": "PaymentID",
                "FilterOperator": "contains",
                "Alias": "PaymentID",
                "DisplayField": "PaymentID"
            },
            {
                "Header": "Valutabel√∏p",
                "Field": "AmountCurrency",
                "FilterOperator": "contains",
                "SumColumn": true
            },
            {
                "Header": "Bel√∏p",
                "Field": "Amount",
                "FilterOperator": "contains",
                "Alias": "Amount",
                "DisplayField": "Amount"
            },
            {
                "Header": "Betalingsdato",
                "Field": "PaymentDate",
                "Type": "date",
                "FilterOperator": "contains",
                "Alias": "PaymentDate",
                "DisplayField": "PaymentDate"
            },
            {
                "Header": "Status",
                "Field": "StatusCode",
                "FilterOperator": "contains"
            }
        ]
    },
    {
        "Name": "Status-logg",
        "Type": "Table",
        "Code": "payment_status_log",
        "IsTopLevelTicker": false,
        "Group": "Bank",
        "Model": "StatusLog",
        "Expand": "",
        "Joins": "StatusLog.CreatedBy eq User.GlobalIdentity",
        "SubTickers": [],
        "UseParentTickerActions": false,
        "ParentFilter": {
            "Field": "EntityID",
            "Operator": "eq",
            "Value": "ID"
        },
        "Filter": "EntityType eq 'Payment'",
        "Columns": [
            {
                "Header": "Dato",
                "Field": "CreatedAt",
                "Format": "DateWithTime"
            },
            {
                "Header": "Fra",
                "Field": "FromStatus"
            },
            {
                "Header": "Til",
                "Field": "ToStatus"
            },
            {
                "Header": "Bruker",
                "Field": "User.DisplayName"
            }
        ]
    },
    {
        "Name": "Status-logg",
        "Type": "Table",
        "Code": "paymentBatch_status_log",
        "IsTopLevelTicker": false,
        "Group": "Bank",
        "Model": "StatusLog",
        "Expand": "",
        "Joins": "StatusLog.CreatedBy eq User.GlobalIdentity",
        "SubTickers": [],
        "UseParentTickerActions": false,
        "ParentFilter": {
            "Field": "EntityID",
            "Operator": "eq",
            "Value": "ID"
        },
        "Filter": "EntityType eq 'PaymentBatch'",
        "Columns": [
            {
                "Header": "Dato",
                "Field": "CreatedAt",
                "Format": "DateWithTime"
            },
            {
                "Header": "Fra",
                "Field": "FromStatus"
            },
            {
                "Header": "Til",
                "Field": "ToStatus"
            },
            {
                "Header": "Bruker",
                "Field": "User.DisplayName"
            }
        ]
    }
]
