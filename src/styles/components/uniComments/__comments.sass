.comments_toggle
    @extend %toolbarButton
    top: -0.4rem !important // meh
    background-image: unicon-chat($uni-color-scale3)
    background-size: 1rem auto
    &:hover,
    &:focus
        background: mix($uni-color-negative, $uni-color-c2a, 80%) no-repeat center
        background-image: unicon-chat($uni-color-c2a)
        background-size: 1rem auto

.comments_count
    display: inline-block
    background: $navbarBackground
    height: pxToRem(26)
    padding: 0 .3rem
    border-radius: 0 pxToRem(3) pxToRem(3) 0
    position: relative
    top: pxToRem(-1)
    margin-left: -.2rem

.comments-view
    @extend %mainNavDropdown // Consolidating a few styles
    position: fixed
    box-sizing: border-box
    height: 60%
    width: 30rem
    margin-top: .3rem
    right: calc(6.5vw + 1.6rem) // The gutter on desktop + padding on toolbar + elems
    z-index: #{map-get($zindex, toolbar) + 1}

    display: none
    &[aria-expanded]:not([aria-expanded=false])
        display: block

    // Put an arrow on it
    &:before
        border: solid transparent
        content: ''
        height: 0
        width: 0
        position: absolute
        pointer-events: none
        display: block
        border-color: rgba(255, 255, 255, 0)
        border-bottom-color: #fff
        border-width: .5rem
        margin-left: -.5rem
        top: -1rem
        right: 1.5rem


    uni-comment-list
        height: calc(100% - 3rem)
        padding: 1.5rem .5rem .5rem .25rem

    uni-comment-input
        height: 3rem
        padding: .5rem .25rem .5rem 1rem
        ul
            bottom: 2rem
            left: 1rem

ol.comment-list
    overflow-y: auto

    li
        display: flex
        flex-flow: row nowrap
        margin: 0 1rem 1rem 0

        &:before
            content: ''

        aside.comment-avatar
            order: 1
            flex: 0 1 4rem
            background-image: unicon-user($uni-color-scale3)
            background-size: 40%
            background-repeat: no-repeat
            background-position: center .25rem

        main
            order: 2
            flex: 1
            font-size: .9rem

            header
                strong
                    margin-right: .5rem
                small
                    color: $uni-color-scale5

            blockquote
                margin: 0 0 1rem 0
                padding: 0
                background: none
                border: none

                .mention
                    background: transparentize($uni-color-toolbar, .9)
                    padding: 0 pxToRem(2)
                    border-radius: pxToRem(2)


uni-comment-list
    display: block
    box-sizing: border-box

    ol
        display: block
        width: 100%
        height: 100%
        overflow-y: auto
        margin: 0
        padding: 0

        small
            float: right

        uni-avatar
            height: 2.5rem
            width: 2.5rem
            margin: .25rem 1rem 0 1rem


uni-comment-input
    position: relative
    display: flex
    flex-flow: row nowrap
    box-sizing: border-box

    input
        order: 1
        flex: 1
        resize: none

    button
        order: 2
        flex: 0 1 6rem
        margin-top: 0 !important

    ul
        @extend .uni-multivalue-values
        position: absolute
        bottom: 1rem
        left: 0
        width: 15rem
        max-height: 17rem
        border-radius: pxToRem(3)

        box-sizing: border-box
        overflow-y: auto
        visibility: hidden
        &[aria-expanded]:not([aria-expanded=false])
            visibility: visible