<section class="input-with-button" (clickOutside)="onClickOutside()">
    <input #inputElement
        [formControl]="control"
        [readonly]="readOnly$ | async"
        [placeholder]="field?.Placeholder || ''"
        (focus)="focusHandler()"
        (blur)="emitChanges()"
        role="combobox"
        type="text"
        tabindex="-1"
    />
    <button
        type="button"
        tabIndex="-1"
        (click)="toggle()"
        [disabled]="readOnly$ | async">
        <i class="material-icons">more_horiz</i>
    </button>
</section>

<input-dropdown-menu #dropdown [input]="inputElement" [visible]="isExpanded && lookupResults?.length">
    <ng-template>
        <section *ngFor="let item of lookupResults; let idx = index"
            class="dropdown-menu-item"
            (mouseover)="selectedIndex = idx"
            (click)="select(idx)"
            [attr.aria-selected]="selectedIndex === idx">
            {{ template(item) }}
        </section>
    </ng-template>
</input-dropdown-menu>