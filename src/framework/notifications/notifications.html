<i class="material-icons notifications-toggle" role="button" (click)="toggle($event)">
    notifications
</i>

<span class="notifications_count" *ngIf="unreadCount > 0">
    {{unreadCount}}
</span>

<span class="notification_view" (clickOutside)="close()" [attr.aria-expanded]="isOpen">
    <h2>Varsler</h2>

    <cdk-virtual-scroll-viewport class="notification_list" itemSize="95" maxBufferPx="500" minBufferPx="500">
        <section class="notification_list_item"
            *cdkVirtualFor="let notification of notifications"
            [ngClass]="{
                'unread': notification.StatusCode === 900010,
                'marked': notification.StatusCode === 900030
            }">

            <p  class="notification_readStatus"
                role="status"
                (click)="toggleReadStatus(notification)"
                [title]="notification.StatusCode === 900010 ? 'Marker som lest' : 'Marker som ulest'">
                {{notification.StatusCode === 900010 ? 'Ulest' : 'Lest'}}
            </p>

            <article class="notification_body"
                (click)="onNotificationClick(notification)"
                title="{{notification.Message}}">

                <header>{{notification.CompanyName}}</header>
                <p>
                    {{getNotificationText(notification)}}
                </p>
                <footer><small>{{getNotificationTime(notification)}} av {{notification.SenderDisplayName}}</small></footer>
            </article>

            <button class="notification_deleteBtn"
                title="Slett notifikasjon"
                (click)="deleteNotification(notification)">
                Slett notifikasjon
            </button>
        </section>
    </cdk-virtual-scroll-viewport>

    <footer class="notification_footer">
        <a (click)="markAllAsRead()">Marker alle som lest</a>
    </footer>
</span>
