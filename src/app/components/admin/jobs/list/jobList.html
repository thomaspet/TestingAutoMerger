<uni-toolbar [config]="{title: 'Jobber', omitFinalCrumb: true}"></uni-toolbar>

<header class="horizontal_nav no-print">
    <ul>
        <li *ngFor="let tab of filterTabs">
            <a (click)="onTabChange(tab)" [ngClass]="{'router-link-active': tab === activeTab}">
                {{tab.label}}&nbsp;
                <span *ngIf="tab.count" class="tab_counter tab_counter_passive">{{tab.count}}</span>
            </a>
        </li>
    </ul>
</header>

<section class="application">

    <article *ngIf="activeTab.id === 1">

        <table class="title-button-bar" >
            <tr><td><h2>Sist kj√∏rte jobber</h2></td>        
            <td><button class="good" (click)="refresh()">Oppdater</button></td>
            </tr>
        </table>

        <table [attr.aria-busy]="busy" class="jobRunList">
            <th>ID</th>
            <th>Jobb</th>
            <th>Start</th>
            <th colspan="2">Status</th>
            <th>Logg</th>
            <tr *ngFor="let item of jobRuns">
                <td class="size-1">
                    {{item.ID}}
                </td>
                <td class="size-2">
                    {{item.JobName}}
                </td>
                <td class="size-2">
                    {{item.Created | date:'yyyy.MM.dd HH:mm'}}
                </td>
                <td class="size-1">{{item.Progress[0]?.Created | date:'HH:mm'}}</td>
                <td class="ellipsis">{{item.Progress[0]?.Progress}}</td>
                <td class="size-1">
                    <a *ngIf="item.HangfireJobId" href="/#/admin/job-logs/{{item.JobName}}/{{item.HangfireJobId || 0}}">
                        Vis logg
                    </a>
                </td>
            </tr>
        </table>
    </article>

    <article *ngIf="activeTab.id === 2">

        <h2>{{activeTab.label}}</h2>

        <table class="jobList">
            <th>
                Jobb
            </th>
            <tr *ngFor="let item of jobs">
                <td>
                    <a href="/#/admin/job-details/{{item.name}}">
                        {{item.name}}
                    </a>
                </td>
            </tr>
        </table>

    </article>

    <article *ngIf="activeTab.id === 3">
        <saft-import-view></saft-import-view>
    </article>
    

</section>