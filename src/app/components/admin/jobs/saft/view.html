<h2>Import av SAF-T (auditfile)
    <i class="material-icons"
        style="cursor: pointer"
        (click)="refresh()">
        refresh
    </i>
</h2>

<label class="upload-input">
    <i class="material-icons">cloud_upload</i>
    <span>Last opp fil</span>

    <input type="file" accept=".xml"
        (change)="uploadFile($event)"
        [attr.aria-disabled]="busy"
        [disabled]="busy"
    />
</label>

<table [attr.aria-busy]="busyFetch" class="simple">
    <thead>
        <tr>
            <th class="size-1">ID</th>
            <th class="size-2">Filnavn</th>
            <th class="size-1">Størrelse</th>
            <th class="size-1">Type</th>
            <th>Jobstatus</th>
            <td class="size-2"></td>
        </tr>
    </thead>
    <tbody>
    <tr *ngFor="let file of files" [class.current]="file.FileID === currentFileId" >
        <td>{{file.FileID}}</td>
        <td>{{file.FileName}}</td>
        <td>{{file.FileSize}}</td>
        <td>{{file.FileContentType}}</td>
        <td class="ellipsis">
            <span [hidden]="!file.busyFetch">Henter status..</span>
            <a href="/#/admin/job-logs?jobName={{jobName}}&jobID={{file.jobid || 0}}" class="bad" [hidden]="!file.hasError">
                &nbsp;En feil har oppstått
            </a>
            <a href="/#/admin/job-logs?jobName={{jobName}}&jobID={{file.jobid || 0}}">{{file.jobStatus}}</a>
        </td>
        <td>
            <button [disabled]="file.disabled" [attr.aria-busy]="file.busy" (click)="onJobStart(file)" class="good">Start import</button>
            <button [disabled]="file.disabled" [attr.aria-busy]="file.busy" (click)="onFileDeleteClick(file)" class="bad">Slett</button>
        </td>
    </tr>
    </tbody>
</table>