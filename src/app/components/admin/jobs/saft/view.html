<h2>SAF-T (auditfile)
    <i class="material-icons"
        style="cursor: pointer"
        (click)="refresh()">
        refresh
    </i>
</h2>

<label class="upload-input">
    <i class="material-icons">cloud_upload</i>
    <span>Last opp fil</span>

    <input type="file" accept=".xml"
        (change)="uploadFile($event)"
        [attr.aria-disabled]="busy"
        [disabled]="busy"
    />
</label>

<label class="upload-input" (click)="exportSaft($event)"style="margin-left:3rem">
    <i class="material-icons">cloud_download</i>
    <span>Start SAFT eksport</span>
</label>


<table [attr.aria-busy]="busyFetch" class="uni-table">
    <thead>
        <tr>
            <th class="size-2">Job</th>
            <th class="size-1">ID</th>
            <th class="size-2">Filnavn</th>
            <th class="size-2">Størrelse</th>
            <th class="size-2">Type</th>
            <th>Jobstatus</th>
            <td class="size-2"></td>
        </tr>
    </thead>
    <tbody>
    <tr *ngFor="let file of files" class="saftTableLine" >
        <td>{{file.JobName}}</td>
        <td>{{file.FileID}}</td>
        <td>{{file.FileName}}</td>
        <td>{{file.FileSize}}</td>
        <td>{{file.FileContentType}}</td>
        <td class="ellipsis">
            <span [hidden]="!file.busyFetch">Henter status..</span>
            <a href="/#/admin/job-logs?jobName={{jobName}}&jobID={{file.jobid || 0}}" class="bad" [hidden]="!file.hasError">
                &nbsp;En feil har oppstått
            </a>
            <a href="/#/admin/job-logs?jobName={{jobName}}&jobID={{file.jobid || 0}}">{{file.jobStatus}}</a>
        </td>
        <td *ngIf="file.JobName!=='ExportSaft'">
            <button  [disabled]="file.disabled" [attr.aria-busy]="file.busy" (click)="onJobStart(file)" class="good">Start import</button>
            <button [disabled]="file.disabled" [attr.aria-busy]="file.busy" (click)="onFileDeleteClick(file)" class="bad">Slett</button>
        </td>
        <td *ngIf="file.JobName==='ExportSaft'">
                <button *ngIf="file.FileID>=0" (click)="onDownloadExport(file)" class="good" style="margin: 0 !important">Last ned</button>
        </td>
    </tr>
    </tbody>
</table>