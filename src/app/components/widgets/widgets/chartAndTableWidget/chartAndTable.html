<section class="widget-wrapper">
    <section class="header sr-widget-header chart-and-table">
        <span style="flex: 1;">{{ widget.description }}</span>
        <section class="filters">
            <button #toggle class="tertiary toggle-button"
                (click)="toggleButtonClick()"
                title="{{ widget?.config?.model === 'CustomerInvoice' ? 'Gå til liste over forfalte faktura' : 'Se tilgjengelige kontoer' }}">
                {{widget?.config?.model === 'CustomerInvoice' ? 'Se forfalte' : 'Kontoer'}}
                <i class="material-icons"> {{widget?.config?.model === 'CustomerInvoice' ? 'arrow_right' : 'expand_more'}} </i>
            </button>
            <dropdown-menu [trigger]="toggle" *ngIf="widget?.config?.model !== 'CustomerInvoice'">
                <ng-template>
                    <a class="dropdown-menu-item" (click)="changeResultLine(false)">
                        Vis månedlig resultat
                    </a>

                    <a class="dropdown-menu-item" (click)="changeResultLine(true)">
                        Vis akkumulert resultat
                    </a>
                </ng-template>
            </dropdown-menu>
        </section>
    </section>

    <section *ngIf="missingData" class="no-content">
        Mangler data
    </section>

    <div *ngIf="!missingData" class="content" style="display: flex;">
        <section class="chart-section" style="width: 200px;">
            <div style="height: calc(100% - 8rem)">
                <canvas style="max-height: 220px" #chartCanvas></canvas>
            </div>
            <div class="legend-vertical-class">
                <section class="legend-row" *ngFor="let label of widget?.config?.labels; let  i = index;">
                    <span class="indicator cost" [ngStyle]="{ 'background-color': this.widget.config.colors[i] }"></span>
                    {{ label }}
                </section>
            </div>
        </section>

        <section class="table-section" style="flex: 1;">
            <ul [ngClass]="widget?.config?.model === 'CustomerInvoice' ? 'chart-and-table-customer' : ''">
                <li class="table-widget-header">
                    <span> </span>
                    <span> {{ headers[0] }} </span>
                    <span> {{ headers[1] }} </span>
                    <span> {{ headers[2] }} </span>
                    <span> {{ headers[3] }} </span>
                </li>

                <li  *ngFor="let row of tableData; let i = index;">
                    <span>
                        <div *ngIf="widget?.config?.model === 'CustomerInvoice'" class="indicator" [ngStyle]="{ 'background-color': row.color }"> </div>
                    </span>
                    <span> {{ row.value1 }} </span>
                    <span> {{ row.value2 }} </span>
                    <span> {{ row.value3 }} </span>
                    <span> {{ row.value4 }} </span>
                </li>
            </ul>

        </section>

    </div>
</section>