<section class="supplier-invoice-detail">

    <header>
        <h1 class="poster_toolbar_headline" 
            *ngIf="supplierInvoice != null && supplierInvoice.ID > 0">
            {{supplierInvoice.InvoiceNumber ? 'Leverandørfakturanr ' + supplierInvoice.InvoiceNumber : ''}}{{supplierInvoice.InvoiceNumber && supplierInvoice.Supplier ? ', ' : ''}}{{supplierInvoice.Supplier ? supplierInvoice.Supplier.Info.Name :''}}                                    
        </h1>
        <p class="poster_toolbar_descriptor" 
            *ngIf="supplierInvoice != null && supplierInvoice.ID > 0">
            Status: {{getStatusText()}}<span *ngIf="supplierInvoice.JournalEntry != null">, bilagsnr: {{supplierInvoice.JournalEntry.JournalEntryNumber != null ? supplierInvoice.JournalEntry.JournalEntryNumber : 'Bilag ikke bokført' }}</span>
        </p>

        <h1 class="poster_toolbar_headline" 
            *ngIf="invoiceId == 0">
            Ny leverandørfaktura
        </h1>
        <p class="poster_toolbar_descriptor" 
            *ngIf="invoiceId == 0">
            Ny faktura med smartbokføring
        </p>            

    </header>

    <section class="poster_overview">
        <uni-widget-poster [model]="supplierInvoice">
            <section class="application" *ngIf="supplierInvoice">
                <section>Restsum kr. {{supplierInvoice.RestAmount }}</section>
                <section>
                    Kreditert kr. {{supplierInvoice.CreditedAmount }}
                </section>
            </section>
        </uni-widget-poster>
    </section>

    <article class="supplier-invoice-detail-form">    
        
        <p class="error validation" *ngIf="errors && errors.length > 0">
            <span *ngFor="let error of errors">
                    {{error.Message}}
            </span>
        </p>

        <uni-form *ngIf='supplierInvoice'
            [config]='config'
            [fields]='fields'
            [model]='supplierInvoice'
            (onReady)="ready($event)">
        </uni-form> 

    </article>

    <register-payment-modal></register-payment-modal>

    <article class="supplier-invoice-detail-booking">
        <journal-entry-manual [supplierInvoice]="supplierInvoice" [runAsSubComponent]="true" [disabled]="disabled" *ngIf="supplierInvoice && supplierInvoice.JournalEntryID"></journal-entry-manual>
    </article>

</section>

<article class="supplier-invoice-detail-document" *ngIf="supplierInvoice && supplierInvoice.ID > 0">
    <uni-image [imageId]="previewId" [size]="previewSize" *ngIf="previewId > 0"></uni-image>   

    <p class="good validation" *ngIf="fileuploader.statusText">
        <span>{{fileuploader.statusText}}</span>
    </p>           
    <uni-document-uploader *ngIf="previewId == -1"
    [service]="fileuploader" 
    [entity]="supplierInvoice"
    (onFileUploaded)="onFileUploaded($event)"></uni-document-uploader>
</article>


<uni-save [actions]="actions" *ngIf="actions"></uni-save>

