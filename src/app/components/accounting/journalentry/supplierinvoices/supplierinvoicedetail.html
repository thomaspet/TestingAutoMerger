<header class="poster">    
    <article class="poster_toolbar">
        <span *ngIf="supplierInvoice != null && supplierInvoice.ID > 0">
            <h2 class="poster_toolbar_headline">
                Leverandørfakturanr {{supplierInvoice.InvoiceNumber}}, {{supplierInvoice.Supplier.Info.Name}}                                    
            </h2>
            <p>
                Status: {{getStatusText()}}<span *ngIf="supplierInvoice.JournalEntry != null">, bilagsnr: {{supplierInvoice.JournalEntry.JournalEntryNumber != null ? supplierInvoice.JournalEntry.JournalEntryNumber : 'Bilag ikke bokført' }}</span>
            </p>
        </span>
        <h2 class="poster_toolbar_headline" *ngIf="invoiceId == 0">
            Ny leverandørfaktura
            <p>Ny faktura med smartbokføring</p>            
        </h2>
    </article>    
</header>

<article class="supplier-invoice-detail-form">    
    <p class="error validation" *ngIf="errors && errors.length > 0">
        <span *ngFor="let error of errors">
                {{error.Message}}
        </span>
    </p>

    <uni-form *ngIf='supplierInvoice'
        [config]='config'
        [fields]='fields'
        [model]='supplierInvoice'
        (onReady)="ready($event)">
    </uni-form> 
</article>

<register-payment-modal
    (changed)="onRegisteredPayment($event)"
></register-payment-modal>

<section class="supplier-invoice-detail-booking">
    <journal-entry-manual [supplierInvoice]="supplierInvoice" [runAsSubComponent]="true" [disabled]="disabled" *ngIf="supplierInvoice && supplierInvoice.JournalEntryID"></journal-entry-manual>
</section>

<section class="supplier-invoice-detail-document" *ngIf="supplierInvoice && supplierInvoice.ID > 0">
    <uni-image [imageId]="previewId" [size]="previewSize" *ngIf="previewId > 0"></uni-image>   

    <uni-document-uploader *ngIf="previewId == -1"
    [service]="fileuploader" 
    [entity]="supplierInvoice"
    (onFileUploaded)="onFileUploaded($event)"></uni-document-uploader>
    <p class="error"><span>{{fileuploader.statusText}}</span></p>              
</section>

<footer class="full-footer">    
    <uni-save [actions]="actions"></uni-save>
</footer>
