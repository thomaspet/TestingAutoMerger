<section class="journal-entry-simple-table-wrapper">
    <dl class="summary" *ngIf="itemsSummaryData" [attr.aria-busy]="busy">
        <dt>Sum debet</dt>
        <dd>Kr {{itemsSummaryData.SumDebet | number:'1.2-2'}}</dd>

        <dt>Sum kredit</dt>
        <dd>Kr {{itemsSummaryData.SumCredit | number:'1.2-2'}}</dd>

        <dt>Differanse</dt>
        <dd>Kr {{itemsSummaryData.Differance | number:'1.2-2'}}</dd>

        <dt>Inng.mva</dt>
        <dd>Kr {{itemsSummaryData.IncomingVat | number:'1.2-2'}}</dd>

        <dt>Utg.mva</dt>
        <dd>Kr {{itemsSummaryData.OutgoingVat | number:'1.2-2'}}</dd>

    </dl>

    <journal-entry-simple-form [dropdownData]="dropdownData" tabindex="1" (created)="newLineCreated($event)" *ngIf="dropdownData != null" [journalEntryLines]="journalEntryLines"></journal-entry-simple-form>
    <section *ngIf="dropdownData == null" class="journal-entry-simple-form-loading-placeholder" [attr.aria-busy]="dropdownData == null">
        Laster...
    </section>
    <table>
        <thead>
            <tr>
                <th>Bilagsnr</th>
                <th class="medium_col">Dato</th>
                <th>Kontoer</th>
                <th>Beløp</th>
                <th>Fordeling</th>
                <th>Beskrivelse</th>
                <th class="small_col"></th>
            </tr>
        </thead>
        <tbody>
            <template ngFor let-line [ngForOf]="journalEntryLines" [ngForTrackBy]="trackByLines">
                <tr tabindex="2" (keyup.enter)="setSelectedJournalEntryLine(line)" class="journalentrysimple-itemline" (click)="setSelectedJournalEntryLine(line)" [class.journal-entry-row-selected]="selectedJournalEntryLine == line">
                    <td class="journalentrysimple_temporary">{{line.JournalEntryNo}}</td>
                    <td class="journalentrysimple-biginfo">{{line.FinancialDate != "0001-01-01T00:00:00" ? line.FinancialDate.toLocaleDateString() : ""}}</td>
                    <td class="journalentrysimple-multilineinfo">
                        <dl>
                            <dt>Debet</dt>
                            <dd>{{line.DebitAccount ? line.DebitAccount.AccountNumber + " - " + line.DebitAccount.AccountName : ""}}</dd>

                            <dt>Kredit</dt>
                            <dd>{{line.CreditAccount ? line.CreditAccount.AccountNumber + " - " + line.CreditAccount.AccountName : ""}}</dd>
                        </dl>
                    </td>
                    <td class="journalentrysimple-biginfo">{{line.Amount | number:'1.2-2'}}</td>
                    <td class="journalentrysimple-multilineinfo">
                        <dl>
                            <dt>Avdeling</dt>
                            <dd>{{getDepartmentName(line)}}</dd>

                            <dt>Prosjekt</dt>
                            <dd>{{getProjectName(line)}}</dd>
                        </dl>
                    </td>
                    <td>{{line.Description}}</td>
                    <td class="action_menu"></td>
                </tr>
                <tr *ngIf="selectedJournalEntryLine == line">
                    <td colspan="7">
                        <journal-entry-simple-form [dropdownData]="dropdownData" [journalEntryLine]="selectedJournalEntryLine" (updated)="editViewUpdated($event)" (aborted)="abortEdit()" [journalEntryLines]="journalEntryLines"></journal-entry-simple-form>
               		</td>
                </tr>
            </template>
            <tr *ngIf="journalEntryLines.length == 0">
                <td colspan="7">
                    Fyll inn data og trykk Legg til over for å legge inn en eller flere bilagslinjer
                </td>
            </tr>
        </tbody>
    </table>
    <section class="journal-entry-simple-form-buttonrow">
        <button class="good" (click)="postJournalEntryData($event)">Lagre og bokfør</button>
        <button class="good" (click)="removeJournalEntryData($event)">Forkast</button>
        <!--<button class="good" (click)="validateJournalEntryData($event)">Valider data</button>-->
        <button class="good" (click)="addDummyJournalEntry($event)">Test</button>
    </section>

</section>
<section class="journal-entry-simple-validation" *ngIf="validationResult">
    <h3 *ngIf="validationResult.Messages.length == 0">
        Ingen valideringsfeil!
    </h3>
    <h3 *ngIf="validationResult.Messages.length > 0">
        Feil i validering:
    </h3>
    <p *ngFor="let message of validationResult.Messages">
        {{message.Message}}
    </p>
</section>
<section class="journal-entry-simple-helper">
    <h3>
        Tips
    </h3>
    <p>Bruk Tab-knappen for å navigere til andre rader og trykk enter for å redigere de, eller klikk på raden du vil redigere med musen</p>
    <p></p>
</section>

