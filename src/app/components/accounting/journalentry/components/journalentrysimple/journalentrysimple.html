<section class="journal-entry-simple-form-buttonrow">
    <button (click)="postJournalEntryData($event)">Lagre og bokfør</button>
    <button (click)="validateJournalEntryData($event)">Valider data</button>
    <button (click)="addDummyJournalEntry($event)">Legg til dummylinje</button>
</section>

<section class="journal-entry-simple-table-wrapper">
    <journal-entry-simple-form [DropdownData]="DropdownData" tabindex="1" (Created)="newLineCreated($event)" *ngIf="DropdownData != null && selectedJournalEntryLine == null"></journal-entry-simple-form>
    <table>
        <thead>
             <tr>
                <th>Nummer</th>
                <th class="medium_col">Dato</th>                
                <th>Kontoer</th>
                <th>Beløp</th>
                <th>Fordeling</th>
                <th>Beskrivelse</th>
                <th class="small_col"></th>
            </tr>
        </thead>
        <tbody>
            <template ngFor #line [ngForOf]="journalEntryLines" [ngForTrackBy]="trackByLines">        
                <tr tabindex="2" (keyup.enter)="setSelectedJournalEntryLine(line)" class="journalentrysimple-itemline" (click)="setSelectedJournalEntryLine(line)">
                    <td class="journalentrysimple-multilineinfo">
                        <div><label>Bilagsnr:</label> {{line.JournalEntryNo}}</div>
                        <!--<div><label>Fakturanr:</label> {{line.SupplierInvoiceNo}}</div>-->
                    </td>
                    <td class="journalentrysimple-biginfo">{{line.FinancialDate.toLocaleDateString()}}</td>                    
                    <td class="journalentrysimple-multilineinfo">
                        <div><label>Debet:</label> {{line.DebitAccount ? line.DebitAccount.AccountNumber + " - " + line.DebitAccount.AccountName : ""}}</div>
                        <div><label>Kredit:</label> {{line.CreditAccount ? line.CreditAccount.AccountNumber + " - " + line.CreditAccount.AccountName : ""}}</div>
                    </td>
                    <td class="journalentrysimple-biginfo">{{line.Amount | number:'1.2-2'}}</td>
                    <td class="journalentrysimple-multilineinfo">
                        <div><label>Avdeling:</label> {{getDepartmentName(line.Dimensions.DepartementID)}}</div>
                        <div><label>Prosjekt:</label> {{getProjectName(line.Dimensions.ProjectID)}}</div>
                    </td>
                    <td>{{line.Description}}</td>
                    <td class="action_menu">                    
                    </td>
                </tr>
                <tr *ngIf="selectedJournalEntryLine == line">
                    <td colspan="7">
                        <journal-entry-simple-form [DropdownData]="DropdownData" [JournalEntryLine]="selectedJournalEntryLine" (Updated)="editViewUpdated($event)" (Aborted)="abortEdit()"></journal-entry-simple-form>
               		</td>
                </tr>
            </template>                  
        </tbody>
    </table>    
</section>
<section class="journal-entry-simple-validation" *ngIf="validationResult">
    <h3 *ngIf="validationResult.Messages.length == 0">
        Ingen valideringsfeil!    
    </h3>
    <h3 *ngIf="validationResult.Messages.length > 0">
        Feil i validering:    
    </h3>
    <ul>
        <li *ngFor="#message of validationResult.Messages">
            {{message}}
        </li>
    </ul>
</section>
<section class="journal-entry-simple-helper">
    <h3>
        Tips
    </h3>
    <p>Bruk Tab-knappen for å navigere til andre rader og trykk enter for å redigere de, eller klikk på raden du vil redigere med musen</p>
    <p></p> 
</section>