<section class="accounting-report-drilldown" *ngIf="periodFilter1 && periodFilter2">
    <div [attr.aria-busy]="busy" class="accounting-report-drilldown-main">
        <table class="accounting-report-drilldown-table">
            <tr>
                <th style="width: 50%">Konto/kontogruppe <button (click)="toggleShowAll()">{{!showall ? 'Vis alle' : 'Skjul alle'}}</button></th>
                <th style="width: 20%" class="amount">{{periodFilter1.year}}</th>
                <th *ngIf="showPercent" style="width: 5%" class="percentage"></th>
                <th *ngIf="showBudget" style="width: 20%" class="amount">Budsjett</th>
                <th *ngIf="showPreviousAccountYear" style="width: 20%" class="amount">{{periodFilter2.year}}</th>
                <th *ngIf="showPercent && showPreviousAccountYear" style="width: 5%" class="percentage"></th>
            </tr>
            <tr *ngFor="let summaryData of flattenedTreeSummaryList" (click)="rowClicked(summaryData)" [class.expanded]="summaryData.expanded">
                <td [ngStyle]="{'padding-left': getPaddingLeft(summaryData.level)}">{{summaryData.number == 9 ? summaryData.amountPeriod1 > 0 ? 'SUM (overskudd)' : (summaryData.amountPeriod1 < 0 ? 'SUM (underskudd)' : 'Sum resultat') : ((summaryData.isAccount ? summaryData.number + ' - ' : '') + summaryData.name)}}</td>
                <td class="amount" [ngClass]="(summaryData.turned ? summaryData.amountPeriod1 >= 0 : summaryData.amountPeriod1 < 0) ? 'negative' : 'positive'">{{numberFormatService.asMoney(summaryData.amountPeriod1, numberFormat)}}</td>
                <td *ngIf="showPercent" class="percentage">{{summaryData.percentagePeriod1}}</td>
                <td *ngIf="showBudget" class="amount" [ngClass]="(summaryData.turned ? summaryData.budget >= 0 : summaryData.budget < 0) ? 'negative' : 'positive'">{{numberFormatService.asMoney(summaryData.budget, numberFormat)}}</td>
                <td *ngIf="showPreviousAccountYear" class="amount" [ngClass]="(summaryData.turned ? summaryData.amountPeriod2 >= 0 : summaryData.amountPeriod2 < 0) ? 'negative' : 'positive'">{{numberFormatService.asMoney(summaryData.amountPeriod2, numberFormat)}}</td>
                <td *ngIf="showPercent && showPreviousAccountYear" class="percentage">{{summaryData.percentagePeriod2}}</td>
            </tr>
        </table>

        <span class="profit-margin">Resultatindikator {{profitMarginText()}}</span>
    </div>

    <div class="accounting-report-drilldown-chart">
        <canvas id="accountingReportDrilldownChart" height="320"></canvas>
    </div>
</section>
