<uni-toolbar
    *ngIf="config && !config.modalMode"
    [config]="toolbarconfig"
    [saveactions]="saveactions">
</uni-toolbar>

<article [ngClass]="{'modal-content': config.modalMode, 'application': !config.modalMode}">
    <section *ngIf="config && !config.modalMode && searchConfig" style="display: flex;">
        <uni-search
            class="account-search"
            [config]="searchConfig"
            (changeEvent)="onFilterAccountChange($event)">
        </uni-search>

        <uni-select
            class="uni-account-report-details-year-select"
            [config]="selectYearConfig"
            [items]="selectYear"
            [value]="activeYear"
            (valueChange)="onYearDropdownChange($event)">
        </uni-select>

        <mat-checkbox style="display: flex; align-items: center;"
            (change)="showCreditedChange()"
            [(ngModel)]="showCredited">
            Vis krediterte
        </mat-checkbox>

    </section>

    <uni-tabs [tabs]="tabs" [(activeIndex)]="tabIndex" (activeIndexChange)="tabChange($event)"></uni-tabs>

    <section class="uni-container" *ngIf="tabIndex === 0">
        <button (click)="toggleFilter()" class="leftpadding iconbutton"><i class="material-icons vertical-middle">settings</i> filter </button>
        <uni-form
            *ngIf="filterVisible"
            [config]="config$"
            [fields]="fields$"
            [model]="filter$"
            (changeEvent)="onFilterChange($event)">
        </uni-form>
        <distribution-period-report-part
            [accountIDs]="accountIDs"
            [subaccountIDs]="subAccountIDs"
            [accountYear1]="(periodFilter1$ | async).year - 1"
            [accountYear2]="(periodFilter1$ | async).year"
            [showHeader]="false"
            [doTurnAmounts]="doTurnDistributionAmounts$ | async"
            [showCredited]="showCredited"
            [includeIncomingBalance]="includeIncomingBalanceInDistributionReport$ | async"
            [dimensionType]="config.dimensionType"
            [dimensionId]="config.dimensionId"
            [filter]="filter"
            (periodSelected)="periodSelected($event, true)"
            (yearChange)="onYearSelected($event)">
        </distribution-period-report-part>
    </section>

    <section class="uni-container" *ngIf="tabIndex === 1">
        <h2 class="account-details-report-header">
            Transaksjoner i perioden
            <period-picker class="accountquery_selector"
                [periodFilter]="periodFilter3$.getValue()"
                (periodFilterChanged)="onPeriodFilterChanged($event)">
            </period-picker>
        </h2>

        <ag-grid-wrapper
            class="transquery-grid-font-size"
            [resource]="transactionsLookupFunction"
            [columnSumResolver]="columnSumResolver"
            [config]="uniTableConfigTransactions$ | async"
            (cellClick)="onCellClick($event)">
        </ag-grid-wrapper>
    </section>
</article>
