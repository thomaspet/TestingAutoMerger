<uni-toolbar
    *ngIf="config && !config.modalMode"
    [config]="toolbarconfig"
    [saveactions]="saveactions">
</uni-toolbar>

<article [ngClass]="{'modal-content': config.modalMode, 'application': !config.modalMode}">
    <section *ngIf="config && !config.modalMode && searchConfig" style="display: flex;">
        <uni-search
            class="account-search"
            [config]="searchConfig"
            (changeEvent)="onFilterAccountChange($event)">
        </uni-search>

        <uni-select
            class="uni-account-report-details-year-select"
            [config]="selectYearConfig"
            [items]="selectYear"
            [value]="activeYear"
            (valueChange)="onYearDropdownChange($event)">
        </uni-select>

        <mat-checkbox style="display: flex; align-items: center;"
            (change)="showCreditedChange()"
            [(ngModel)]="showCredited">
            Vis krediterte
        </mat-checkbox>

    </section>

    <uni-tabs [tabs]="tabs" [(activeIndex)]="tabIndex" (activeIndexChange)="tabChange($event)"></uni-tabs>

    <section class="uni-container" *ngIf="tabIndex === 0">
        Viser perioder:
        <period-picker
            [periodFilter]="periodFilter"
            (periodFilterChanged)="onPeriodFilterChanged($event)">
        </period-picker>
        <button (click)="toggleFilter()" class="tertiary c2a">
            <i class="material-icons">filter_list</i> Filter
        </button>
        <uni-form
            *ngIf="filterVisible"
            [config]="config$"
            [fields]="fields$"
            [model]="filter$"
            (changeEvent)="onFilterChange($event)">
        </uni-form>
        <distribution-period-report-part
            [accountIDs]="accountIDs"
            [subaccountIDs]="subAccountIDs"
            [accountYear1]="activeYear - 1"
            [accountYear2]="activeYear"
            [showHeader]="false"
            [doTurnAmounts]="doTurnDistributionAmounts$ | async"
            [showCredited]="showCredited"
            [includeIncomingBalance]="includeIncomingBalanceInDistributionReport$ | async"
            [dimensionType]="config.dimensionType"
            [dimensionId]="config.dimensionId"
            [filter]="filter"
            [fromPeriod]="periodFilter?.fromPeriodNo"
            [toPeriod]="periodFilter?.toPeriodNo"
            (periodSelected)="periodSelected($event, true)">
        </distribution-period-report-part>
    </section>

    <section class="uni-container" *ngIf="tabIndex === 1">
        <div style="display: flex; align-items: center; padding: .5rem 1rem !important;">
            <h2 style="margin: 0; font-size: 1.2rem; margin-right: .5rem; font: 500 15px var(--font-family); color: rgba(0,0,0,.75);"> Transaksjoner for datoutvalg: </h2>
            <uni-date-selector class="uni-period-selector-trigger-button" [toDate]="toDate" [fromDate]="fromDate" (dateChange)="periodChange($event)"> </uni-date-selector>
            <uni-select
                [config]="selectDateFieldConfig"
                [items]="dateFields"
                [value]="currentDateField.label"
                (valueChange)="onDateForSelectionChange($event)">
            </uni-select>
        </div>

        <ag-grid-wrapper
            [resource]="transactionsLookupFunction"
            [columnSumResolver]="columnSumResolver"
            [config]="tableConfig"
            (cellClick)="onCellClick($event)">
        </ag-grid-wrapper>
    </section>
</article>
