<uni-toolbar [config]="toolbarConfig"></uni-toolbar>

<aside class="horizontal_nav no-print">
    <ul>
        <li class="unigrid-small-true unigrid-huge-false unigrid-large-false unigrid-medium-false" >
            <a (click)="onTabClick(tabs[0])" [ngClass]="{'router-link-active': tabs[0].isSelected}" >{{tabs[0].label}}</a> 
        </li>
        <li *ngFor="let tab of tabs" [hidden]="tab.isHidden" >
            <a (click)="onTabClick(tab)" [ngClass]="{'router-link-active': tab.isSelected}" >
                {{tab.label}}
                <span *ngIf="tab.count" class="tab_counter">{{tab.count}}</span>
            </a> 
        </li>
    </ul>    
</aside>


<section class="application split-tabs-parent" [attr.aria-busy]="busy" >

    <section class="split-tabs">

        <aside>
            <uni-form
                [config]='formConfig'
                [fields]='fields'
                [model]='current'
                (changeEvent)="onFormChange($event)"
                (readyEvent)="onFormReady($event)">
            </uni-form>

            <article class="collapsable no-topmargin no-horzmargins" [ngClass]="{'-is-open': !collapseSimpleJournal}">
                <h4 class="no-topmargin" (click)="collapseSimpleJournal = !collapseSimpleJournal">Kontering</h4>
                <div class="collapsable-content">
                    <bill-simple-journalentry class="no-topmargin" [supplierinvoice]="current" (valueChange)="onEntryChange($event)" ></bill-simple-journalentry>
                </div>
            </article>

        </aside>

        <div [hidden]="!tabs[1].isSelected">

            <div *ngIf="!current?.ID">
                <uni-image [singleImage]="true" [uploadWithoutEntity]="'true'" [fileIDs]="fileIds"
                    (fileListReady)="onFileListReady($event)">
                </uni-image>
            </div>
            <uni-image *ngIf="current?.ID" [entity]="'SupplierInvoice'" [entityID]="current?.ID"
                (fileListReady)="onFileListReady($event)" >
            </uni-image>

        </div>

        <!--
        <div [hidden]="!tabs[2].isSelected">
            <h3>Bilagslinjer</h3>
        </div>    

        <div [hidden]="!tabs[3].isSelected">
            <h3>Varelinjer</h3>
        </div>
        -->    

        <div [hidden]="!tabs[4].isSelected">
            <uni-bill-history [isActive]="tabs[4].isSelected" [supplierID]="this.current?.SupplierID" [parentID]="this.current?.ID" >                
            </uni-bill-history>
        </div>

    </section>

</section>

<uni-save class="no-print" [actions]="actions"></uni-save>

<register-payment-modal></register-payment-modal>

<supplier-detail-modal (change)="onSupplierModalChanged($event)" ></supplier-detail-modal>

<uni-confirm-modal></uni-confirm-modal> 

<bankaccount-modal></bankaccount-modal>