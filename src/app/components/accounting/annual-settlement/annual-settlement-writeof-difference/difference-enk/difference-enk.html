<uni-toolbar
	[config]="{ title: 'Avskrivninger' }"
></uni-toolbar>

<section class="application" style="padding: 1rem 10rem">

	<section class="top-nav-container">
		<button class="tertiary" (click)="goBack()"> <i class="material-icons">arrow_back</i> </button>
		<p>Tilbake til oversikten <i class="material-icons show-info-icon" title="Vis informasjon" *ngIf="!showInfo" (click)="showInfo = true;"> info</i> </p>
		<span>2020</span>
	</section>
	
	<section class="step-header-section">
		<span class="stepper-circle-container"> {{ step + 1 }} / {{ stepContentArray.length }} </span>
		<p> {{ infoContent.title }} </p>
		<span>Du har fullført {{ step }} av {{ stepContentArray.length }} trinn</span>
	</section>

    <uni-alert-component
		[type]="'good'"
		[icon]="'info'"
		[title]="infoContent.title"
		[text]="infoContent.text"
		[(isOpen)]="showInfo"
		(close)="showInfo = false"
	></uni-alert-component>

	<section class="uni-card loading-section">

		<section *ngIf="busy" class="modal-spinner">
            <mat-spinner class="c2a"></mat-spinner>
		</section>

		<!-- EIENDELER -->
		<section class="uni-card-content" *ngIf="infoContent.step === 0">

			<section class="assets-table-section">

				<!-- DETAILS TABLE START -->
				<simple-table class="annual-settlement-table" style="margin-bottom: 3rem;" *ngIf="assetsDetails">
					<thead>
						<tr>
							<th>Saldogruppe</th>
							<th>Avskr. %</th>
							<th class="align-right">Inngående verdi</th>
							<th class="align-right">Endring i året</th>
							<th class="align-right">Avskrivning</th>
							<th class="align-right">Utgående verdi</th>
						</tr>
					</thead>

					<tbody>
						<tr *ngFor="let group of assetsDetails">
							<td> {{ group.GroupCode }} </td>
							<td> {{ group.DepreciationRate }}% </td>
							<td class="align-right"> {{ group.Value | uninumberformat: 'money' }} </td>
							<td class="align-right"> {{ group.Movement | uninumberformat: 'money' }} </td>
							<td class="align-right"> {{ group.TaxbasedDepreciation | uninumberformat: 'money' }}  </td>
							<td class="align-right"> {{ group.TaxBasedUB | uninumberformat: 'money' }} </td>
						</tr>

						<tr>
							<td colspan="2">Skattemessig verdi på eiendeler</td>
							<td class="align-right"> {{ sumLine.Value | uninumberformat: 'money' }} </td>
							<td class="align-right"> {{ sumLine.Movement | uninumberformat: 'money' }} </td>
							<td class="align-right"> {{ sumLine.TaxbasedDepreciation | uninumberformat: 'money' }}  </td>
							<td class="align-right"> {{ sumLine.TaxBasedUB | uninumberformat: 'money' }} </td>
						</tr>
					</tbody>
				</simple-table>
			</section>

			<section>
				<button class="c2a" (click)="bookWriteOf()"> Bokfør avskrivningen  </button>
				<span> Avskrivningen er bokført </span>
			</section>

		</section>

		<!-- FAST EIENDOM -->
		<section class="uni-card-content" *ngIf="infoContent.step === 1">

			<section class="writeof-form-section">
				Hello world #2
			</section>

		</section>

		<!-- FORETNINGSBYGG -->
		<section class="uni-card-content" *ngIf="infoContent.step === 2">

			<section class="writeof-form-section">
				Hello world #3
			</section>

		</section>

		<!-- TRANSPORTMIDDEL -->
		<section class="uni-card-content" *ngIf="infoContent.step === 3">

			<section class="writeof-form-section">
				Hello world #4
			</section>

		</section>

		<!-- ELEKTRONISK KOMMUNIKASJON -->
		<section class="uni-card-content" *ngIf="infoContent.step === 4">

			<section class="writeof-form-section">
				
				<span class="info-span-header"> Privat bruk av telefon og bredbånd til eier av firmaet </span>
				<span class="info-span"> Dersom du har hatt kostnader til elektronisk kommunikasjon (telefon, bredbånd osv) som du bruker både privat og i firmaet får du utgiftsført alt over 4 329.00 kr. </span>

				<label class="left-aligned-span">
					<span>Private andel av elektronisk kommunikasjon</span>
					<input type="number" placeholder="Oppgi beløp" [(ngModel)]="annualSettlement.Fields.GevinstTapskontoSaldoFjoraret">
				</label>

			</section>

		</section>

	</section>

	<section class="navigation-button-container" *ngIf="!busy">
		<button [disabled]="step <= 0" (click)="onStep(-1)" class="secondary"> Tilbake </button>
		<button (click)="onStep(1)" class="c2a"> {{ infoContent.buttonText }} </button>
	</section>

</section>