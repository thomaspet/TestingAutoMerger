<annual-settlement-check-list-toolbar-component
    [annualSettlement]="annualSettlement"
></annual-settlement-check-list-toolbar-component>
<section class="container-fluid uni-grid-container">
    <section class="row header page-navigation">
        <a href="#/accounting/annual-settlement" class="page-navigation-button">
            <i class="material-icons">keyboard_backspace</i>
        </a>
        <h5>
            Sjekkliste for årsavslutning
        </h5>
        <i class="material-icons-outlined">info</i>
        <h4>
            2020
        </h4>
    </section>
    <section class="row">
        <section class="as-alert info" *ngIf="showInfoBox">
            <i class="material-icons info">info</i>
            <article class="info-text">
                <h6>{{infoOption.title}}</h6>
                <p>
                    {{infoOption.text}}
                </p>
            </article>
            <i class="material-icons close" (click)="showInfoBox = false">close</i>
        </section>
        <uni-custom-list>
            <uni-custom-list-item *ngFor="let option of options; let i = index" [step]="option"
                    [class.checked]="option?.checked"
                    [class.disabled] = "(nextOption < options.length && i !== nextOption - 1 && i !== nextOption)
                                        || (nextOption === options.length && i < options.length - 1)">
                <ng-template #stepButtonTemplate let-item="item">
                    <mat-checkbox [ngModel]="option?.checked"
                                  (change)="updateOption(option, $event)"
                                  [disabled]="(nextOption < options.length && i !== nextOption - 1 && i !== nextOption)
                                                || (nextOption === options.length && i < options.length - 1)"
                    ></mat-checkbox>
                </ng-template>
                <ng-template #stepCardTemplate let-item="item">
                    <h6 class="custom-list-item-title">{{item.title}}</h6>
                    <article
                        class="custom-list-item-content"
                        [innerHTML]="item.text" *ngIf="!item?.checked"
                    ></article>
                </ng-template>
            </uni-custom-list-item>
        </uni-custom-list>
    </section>
    <section class="row last justify-content-end">
        <button (click)="completeCheckListStep()" [disabled]="annualSettlement?.StatusCode > 36100">Sjekkliste fullført</button>
    </section>
</section>
