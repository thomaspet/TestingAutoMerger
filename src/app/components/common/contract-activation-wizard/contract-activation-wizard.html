<section class="contract-types" *ngIf="!loadingData && contractTypes?.length && !selectedContractType">
    <section class="contract-type-grid">
        <contract-type-card
            *ngFor="let contractType of contractTypes"
            [contractType]="contractType"
            [recommended]="contractType.Name === 'Plus'"
            (selected)="onContractTypeSelected(contractType)">
        </contract-type-card>
    </section>

    <button class="tertiary c2a" (click)="back.emit()">
        <i class="material-icons">keyboard_backspace</i>
        Tilbake
    </button>
</section>

<section *ngIf="!loadingData && (!contractTypes?.length || selectedContractType)" class="uni-card shadow">
    <section class="uni-card-content">
        <h1>{{headerText}}</h1>

        <form [formGroup]="customerDetailsForm">
            <label class="uni-label">
                <span>Navn</span>
                <input uniAutoFocus type="text" formControlName="ContactPerson" />
            </label>

            <label class="uni-label">
                <span>Epost</span>
                <input type="text" formControlName="ContactEmail" />
            </label>

            <label class="uni-label">
                <span>Telefon</span>
                <input type="text" formControlName="ContactPhone" />
            </label>

            <label *ngIf="customerDetailsForm.controls['PersonalNumber']" class="uni-label">
                <span>Personnummer</span>
                <input type="text" formControlName="PersonalNumber">
            </label>

            <label *ngIf="customerDetailsForm.controls['BankUserID']" class="uni-label">
                <!-- TODO: tooltip -->
                <span>Bruker-identifikator i nettbank bedrift</span>
                <input type="text" formControlName="BankUserID">
            </label>

            <mat-checkbox *ngIf="customerDetailsForm.controls['IsBankCustomer']" formControlName="IsBankCustomer">
                <span class="checkbox-label">Jeg er allerede SR-Bank bedriftskunde</span>
            </mat-checkbox>
        </form>


        <mat-checkbox [(ngModel)]="termsAgreed" [disabled]="activationInProgress">
            <span class="checkbox-label">
                Jeg har lest og godtar
                <a [href]="lisenceAgreementUrl" target="_blank" rel="noopener noreferrer">lisensavtalen</a>.
            </span>
        </mat-checkbox>
    </section>

    <section class="uni-card-footer">
        <button class="secondary pull-left"
            *ngIf="contractTypes?.length"
            (click)="selectedContractType = undefined">
            Tilbake
        </button>

        <button class="c2a"
            [disabled]="!termsAgreed"
            [attr.aria-busy]="activationInProgress"
            (click)="activateContract()">
            {{submitButtonText}}
        </button>
    </section>
</section>
