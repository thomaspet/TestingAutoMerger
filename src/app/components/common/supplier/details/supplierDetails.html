<uni-toolbar *ngIf="!modalMode" [config]="toolbarconfig"
             [saveactions]="saveactions"
             [commentsConfig]="commentsConfig">
</uni-toolbar>

<header class="supplier_poster" *ngIf="(supplier$|async)">
    <div class="horizontal_nav" *ngIf="(supplier$|async)?.ID">
        <ul>
            <li>
                <a [class]="activeTab === 'details' ? 'router-link-active' : ''"
                   (click)="showTab('details')">
                    Detaljer
                </a>
            </li>
            <li>
                <a [class]="activeTab === 'reconciliation' ? 'router-link-active' : ''"
                   (click)="showTab('reconciliation')">
                    Ã…pne poster
                </a>
            </li>
            <li>
                <a [class]="activeTab === 'attachments' ? 'router-link-active' : ''"
                   (click)="showTab('attachments')">
                    Dokumenter
                </a>
            </li>
            <li *ngFor="let link of reportLinks">
                <a
                        [class]="activeTab === 'uniquery' && showReportWithID == link.id ? 'router-link-active' : ''"
                        (click)="showTab('report', link.id)"
                >{{link.name}}</a>
            </li>
        </ul>
    </div>
</header>

<section class="supplier-details application" *ngIf='(supplier$|async)'>
    <uni-form *ngIf="activeTab === 'details'"
              [config]="config$"
              [fields]="fields$"
              [model]="supplier$"
              (changeEvent)="supplierDetailsChange($event)">
    </uni-form>
    <article class="collapsable" [ngClass]="{'-is-open': showContactSection}" *ngIf="activeTab === 'details' && (supplier$|async)?.ID">
        <h4 (click)="showContactSection = !showContactSection">Kontakter</h4>
        <div class="collapsable-content">
            <contacts
                [parentBusinessRelation]="(supplier$ | async)?.Info"
                (contactChanged)="onContactChanged($event)">
            </contacts>
        </div>
    </article>
    <ledger-account-reconciliation [supplierID]="(supplier$|async)?.ID"  *ngIf="activeTab === 'reconciliation'"></ledger-account-reconciliation>
    <uni-attachments *ngIf="activeTab === 'attachments'"
        id="attachments"
        [entity]="'Supplier'"
        [entityID]="(supplier$ | async)?.ID"
        [hideLabel]="true">
    </uni-attachments>
    <uni-query-read-only
            *ngFor="let link of reportLinks"
            [hidden]="showReportWithID != link.id"
            [ngClass]="{'hidden': showReportWithID != link.id}"
            [queryDefinitionID]="link.id"
            [externalID]="(supplier$|async)?.ID">
    </uni-query-read-only>
</section>

<uni-save *ngIf="modalMode" [actions]="saveactions" class="uni_save_modal_mode"></uni-save>
