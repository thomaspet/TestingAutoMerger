<section role="dialog" class="uni-modal">
    <header>
        Bokføre bankdata
        <label>
            <span>Nummerserie</span>
            <select class="nrserie" [(ngModel)]="session.selectedSerie">
                <option *ngFor="let serie of session.series" [ngValue]="serie">
                    {{serie.DisplayName}}
                </option>
            </select>
        </label>
    </header>

    <article>
        <section *ngIf="busy" class="modal-spinner">
            <mat-spinner class="c2a"></mat-spinner>
        </section>

        <ag-grid-wrapper class="compactcells"
            [resource]="session?.items"
            [config]="tableConfig"
            (rowSelect)="onRowSelected($event)"
            (rowDelete)="onRowDeleted($event)">
        </ag-grid-wrapper>

    </article>

    <footer>
        <span class="pull-left" *ngIf="session?.balance" [ngClass]="session?.balance >= 0 ? 'positive' : 'negative'">
            <i class="material-icons">error</i>
            Differanse: {{ session?.balance | uninumberformat: 'money'}}
        </span>

        <mat-checkbox [(ngModel)]="settings.journalAsDraft">Lagre som kladd</mat-checkbox>

        <button class="secondary" (click)="onClose.emit()">Avbryt</button>

        <button [disabled]="session?.balance && !settings.journalAsDraft" class="c2a"
            (click)="import()">
            {{(settings.journalAsDraft ? 'Opprett kladd' : 'Bokfør')}}
        </button>
    </footer>
</section>