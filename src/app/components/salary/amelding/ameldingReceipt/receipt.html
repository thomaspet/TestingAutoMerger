<section>
    <table *ngIf="isRejected">
        <tr>
            <th>
                <h1 style="color: red">Avvik</h1>
            </th>
            <td></td>
        </tr>
        <tr>
            <th>
                <em class="amelding_validation_errors" title="Avvik"></em>
            </th>
            <td>
                A-meldingen du har sendt inn har blitt avvist i altinn<br>
                Det betyr at a-meldingen du leverte før denne er den gjeldende i altinn<br>
                Vennligst korriger feilen, generer ny a-melding og send den inn
            </td>
        </tr>
    </table>

    <ul>
        <section *ngFor="let avvik of allAvvikGroupedByPeriod">
            <h4>Periode {{avvik.periode}}</h4>

            <li *ngFor="let periodeavvik of avvik.periodeAvvik; let index = index" class="amelding_summaryview collapsable" [ngClass]="{'-is-open':!periodeavvik.closed}">
                <h4 (click)="periodeavvik.closed = !periodeavvik.closed">{{periodeavvik.id}}</h4>
                <table class="collapsable-content">
                    <tr>
                        <th>Avvikstype</th>
                        <td>{{periodeavvik.id}}</td>
                    </tr>
                    <tr>
                        <th>Periode</th>
                        <td>{{periodeavvik.belongsToPeriod}}</td>
                    </tr>
                    <tr>
                        <th>Alvorlighetsgrad</th>
                        <td>{{periodeavvik.alvorlighetsgrad}}</td>
                    </tr>
                    <tr>
                        <th>Navn</th>
                        <td colspan="3">{{periodeavvik.navn}}</td>
                    </tr>
                    <tr *ngIf="periodeavvik.ansattnummer">
                        <th>Ansattnummer</th>
                        <td>{{periodeavvik.ansattnummer}}</td>
                    </tr>
                    <tr *ngIf="periodeavvik.foedselsdato">
                        <th>Fødselsdato</th>
                        <td>{{periodeavvik.foedselsdato}}</td>
                    </tr>
                    <tr *ngIf="periodeavvik.ansattnavn">
                        <th>Ansattnavn</th>
                        <td>{{periodeavvik.ansattnavn}}</td>
                    </tr>
                    <tr *ngIf="periodeavvik.arbeidsforholdId">
                        <th>ArbeidsforholdID</th>
                        <td>{{periodeavvik.arbeidsforholdId}}</td>
                    </tr>
                    <tr *ngIf="periodeavvik.yrke">
                        <th>Stillingskode</th>
                        <td>{{periodeavvik.yrke}}</td>
                    </tr>
                    <tr *ngIf="periodeavvik.beloep">
                        <th>Beløp</th>
                        <td>{{periodeavvik.beloep}}</td>
                    </tr>
                    <tr *ngIf="periodeavvik.loennsinntektBeskrivelse">
                        <th>Lønnsinntekt beskrivelse</th>
                        <td>{{periodeavvik.loennsinntektBeskrivelse}}</td>
                    </tr>
                    <tr *ngIf="periodeavvik.fordel">
                        <th>Fordel</th>
                        <td>{{periodeavvik.fordel}}</td>
                    </tr>
                    <tr>
                        <th>Detaljer</th>
                        <td colspan="3">{{periodeavvik.detaljer}}</td>
                    </tr>
                </table>
            </li>
        </section>
    </ul>

    <h1 *ngIf="mottattLeveranserIPerioden.length > 0">Leveranser (a-meldinger)</h1>

    <ag-grid-wrapper *ngIf="mottattLeveranserIPerioden.length > 0" [config]="mottattLeveranserIPeriodenConfig" [resource]="mottattLeveranserIPerioden" (rowSelected)="rowSelected($event)"></ag-grid-wrapper>
</section>
