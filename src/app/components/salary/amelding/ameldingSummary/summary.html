<section class="uni-container">
    <dl class="amelding_summary_overview" *ngIf="currentAMelding">
        <dt>A-melding ID</dt>
        <dd>{{currentAMelding.replacesID > 0 ? currentAMelding.ID + ' (Erstatter ID ' + currentAMelding.replacesID + ')' : currentAMelding.ID}}</dd>

        <dt>Klargjort</dt>
        <dd>{{createdDate}}</dd>

        <dt>Innsendt</dt>
        <dd>{{sentDate ? sentDate : 'Ikke innsendt'}}</dd>

        <dt>Status</dt>
        <dd>{{statusText}}</dd>
    </dl>


    <ul class="amelding_summary_sections" *ngIf="entitiesWithData">

        <li *ngFor="let virksomhet of entitiesWithData; let index = index" class="amelding_summary_section" [attr.aria-expanded]="virksomhet.expanded">

            <section class="amelding_summary_section_header" (click)="virksomhet.expanded = !virksomhet.expanded">
                <i class="material-icons">
                    {{virksomhet.expanded ? 'keyboard_arrow_down' : 'keyboard_arrow_right'}}
                </i>

                <p>
                    <strong>{{virksomhet.orgNumber | uninumberformat:'orgno'}}</strong>
                    {{virksomhet.name}}
                </p>

                <small>
                    Grunnlag arbeidsgiveravgift
                    <strong>{{virksomhet.sums.agaBase | unicurrency}}</strong>
                </small>
            </section>

            <article class="amelding_summary_section_details" *ngIf="virksomhet.expanded">

                <h2>Ansatte og arbeidsforhold</h2>
                <uni-table [config]="employeeTableConfig" [resource]="virksomhet.employees"></uni-table>

                <h2 *ngIf="virksomhet.leaves && virksomhet.leaves.length > 0">Permisjoner</h2>
                <uni-table *ngIf="virksomhet.leaves && virksomhet.leaves.length > 0" [config]="leaveTableConfig" [resource]="virksomhet.leaves"></uni-table>

                <h2 *ngIf="virksomhet.transactions && virksomhet.transactions.length > 0">Sum per beskrivelse</h2>
                <uni-table *ngIf="virksomhet.transactions && virksomhet.transactions.length > 0" [config]="transactionTableConfig" [resource]="virksomhet.transactions"></uni-table>

            </article>


        </li>
    </ul>
</section>