<section class="coverView" [attr.aria-busy]="creatingRun">

    <uni-toolbar
        [config]="toolbarconfig"
        [showFullStatustrack]="true"
        [contextmenu]="contextMenuItems"
        [saveactions]="saveActions"
        [tags]="categoryFilter"
        [tagConfig]="tagConfig"
        [searchConfig]="searchConfig$ | async"
        (tagsChange)="filterChange($event)"
        (tagsBusy)="setBusyOnChildren($event)">
    </uni-toolbar>

    <section class="entityDetails" [attr.aria-expanded]="detailsActive" *ngIf="payrollrun$.getValue()">
        <uni-form [config]="config$" [fields]="fields$" [model]="payrollrun$" (changeEvent)="change($event)"></uni-form>
    </section>

    <section class="application" [attr.aria-disabled]="detailsActive" [attr.aria-busy]="busy">
        <section class="payroll-info-and-links">
            <section class="payroll-info" *ngIf="payrollrun$ | async as payrollrun">
                <span>
                    <i class="material-icons">date_range</i>
                    Periode: <strong>{{payrollrun.FromDate | unidateformat}} - {{payrollrun.ToDate | unidateformat}}</strong>
                </span>

                <span>
                    <i class="material-icons">date_range</i>
                    Utbetalingsdato: <strong>{{payrollrun.PayDate | unidateformat}}</strong>
                </span>

                <span>
                    <i class="material-icons">people</i>
                    {{empCount || 0}} ansatte
                </span>

                <span>
                    <i class="material-icons">attach_money</i>
                    Beløp til utbetaling: <strong>{{paymentSum | uninumberformat: 'money'}}</strong>
                </span>
                <span>
                    <uni-negative-salary [payrollRunID]=payrollrunID [salaryTransactionCount]=negativeSalaryTransactionsCount></uni-negative-salary>
                </span>
            </section>

            <section class="link-list-section">
                <a class="dropdown-menu-item" (click)="openTaxCardModal()">Skattekort</a>
                <a class="dropdown-menu-item" (click)="transferHoursToSalary()">Overfør timer til lønn</a>
                <a class="dropdown-menu-item" (click)="transferTravelsToSalary()">Overfør reiser til lønn</a>
                <a class="dropdown-menu-item" (click)="generateVacationPay()">Generer feriepenger</a>
            </section>
        </section>

        <salarytrans></salarytrans>
    </section>


</section>
