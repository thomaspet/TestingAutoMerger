<section role="dialog" class="uni-modal vacationPay">
    <header>Feriepenger - oppsett og utbetaling</header>
    <article [attr.aria-busy]="!vacationpayBasis && !companysalary" class="scrollable">
        <section [attr.aria-busy]="!companysalary" class="vacationpay_Flexheader">
            <uni-form class="vacationpay_settings_left" [config]="config$" [fields]="fields$" [model]="vacationHeaderModel$" (changeEvent)="change($event)"></uni-form>
            <uni-information *ngIf="companysalary" [config]="infoConfig$ | async" class="infoNote">
                <table>
                    <tr>
                        <td>Feriepengesats</td>
                        <td class="vacationpay_settingValues">{{companysalary['_Rate'] | uninumberformat:'percentagewithdecimal'}}</td>
                        <td></td>
                        <td>Trekk i lønn for ferie</td>
                        <td class="vacationpay_settingValues">{{companysalary['_wagedeductionText']}}</td>
                    </tr>
                    <tr>
                        <td>Sats over 60 år</td>
                        <td class="vacationpay_settingValues">{{companysalary['_Rate60'] | uninumberformat:'percentagewithdecimal'}}</td>
                        <td></td>
                        <td>Konto kostnader feriepenger</td>
                        <td class="vacationpay_settingValues">{{companysalary?.MainAccountCostVacation}}</td>
                    </tr>
                    <tr>
                        <td>Grunnbeløp</td>
                        <td class="vacationpay_settingValues">{{companysalary['_BasicAmount'] | unicurrency}}</td>
                        <td></td>
                        <td>Konto avsatt feriepenger</td>
                        <td class="vacationpay_settingValues">{{companysalary?.MainAccountAllocatedVacation}}</td>
                    </tr>
                </table>
                <a class="vacationPay_settingsLink" (click)="openVacationpaySettings()">Endre feriepengeinnstillinger</a>
            </uni-information>
        </section>

        <section class="uniTable" [attr.aria-busy]="!vacationpayBasis || gridBusy">
            <ag-grid-wrapper
                [resource]="vacationpayBasis"
                [config]="tableConfig"
                (rowChange)="rowChanged($event)"
                (rowSelectionChange)="onRowSelectionChange($event)"
                (dataLoaded)="updatetotalPay()">
            </ag-grid-wrapper>
        </section>

        <section class="sum">
            <h4 style="text-align:right">Totalsum utbetales {{totalPayout | unicurrency}}</h4>
        </section>

    </article>

    <footer>
        <combo-button [actions]="saveactions" [mainAction]="mainAction"></combo-button>
        <button class="bad" (click)="closeModal()">Lukk</button>
    </footer>
</section>
