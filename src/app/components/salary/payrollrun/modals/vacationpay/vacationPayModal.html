<section role="dialog" class="vacationPay">
    <header>
        <h1>Feriepenger - oppsett og utbetaling</h1>
    </header>
    <article [attr.aria-busy]="busy">
        <section class="vacationpay_Flexheader">
            <uni-form class="vacationpay_settings_left" [config]="config$" [fields]="fields$" [model]="vacationHeaderModel$" (changeEvent)="change($event)"></uni-form>
            <uni-information [config]="infoConfig$ | async" class="infoNote">
                <table *ngIf="companysalary">
                    <tr>
                        <td>Feriepengesats</td>
                        <td class="vacationpay_settingValues">{{companysalary._Rate | uninumberformat:'percentagewithdecimal'}}</td>
                        <td></td>
                        <td>Trekk i lønn for ferie</td>
                        <td class="vacationpay_settingValues">{{companysalary._wagedeductionText}}</td>
                    </tr>
                    <tr>
                        <td>Sats over 60 år</td>
                        <td class="vacationpay_settingValues">{{companysalary._Rate60 | uninumberformat:'percentagewithdecimal'}}</td>
                        <td></td>
                        <td>Konto kostnader feriepenger</td>
                        <td class="vacationpay_settingValues">{{companysalary.MainAccountCostVacation}}</td>
                    </tr>
                    <tr>
                        <td>Grunnbeløp</td>
                        <td class="vacationpay_settingValues">{{companysalary._BasicAmount | unicurrency}}</td>
                        <td></td>
                        <td>Konto avsatt feriepenger</td>
                        <td class="vacationpay_settingValues">{{companysalary.MainAccountAllocatedVacation}}</td>
                    </tr>
                </table>
                <a class="vacationPay_settingsLink" (click)="openVacationpaySettings()">Endre feriepengeinnstillinger</a>
            </uni-information>
        </section>

        <uni-table
            [resource]="vacationpayBasis"
            [config]="tableConfig"
            [attr.aria-busy]="basicamountBusy"
            (rowChanged)="rowChanged($event)"
            (rowSelectionChanged)="onRowSelectionChange($event)"
            (dataLoaded)="updatetotalPay()">
        </uni-table>

        <h4 style="text-align:right">Totalsum utbetales {{totalPayout | unicurrency}}</h4>
    </article>

    <footer>
        <section role="group" class="comboButton" *ngIf="mainAction">
            <button class="comboButton_btn good" type="button" (click)="mainAction.action()" [attr.aria-busy]="busy" [disabled]="mainAction.disabled">{{mainAction.label}}</button>
            <button class="comboButton_more good" type="button" (click)="open = !open" aria-owns="saveActionMenu" [attr.aria-expanded]="open">More options</button>

            <ul class="comboButton_moreList" [attr.aria-expanded]="open" role="menu">
                <li *ngFor="let action of saveactions" (click)="action.action()" role="menuitem" [attr.aria-disabled]="action.disabled">{{action.label}}</li>
            </ul>

        </section>
        <section>
            <button class="bad" (click)="closeModal()">Lukk</button>
        </section>
    </footer>
</section>
