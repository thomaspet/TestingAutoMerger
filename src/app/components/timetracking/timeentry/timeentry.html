<aside class="horizontal_nav">
    <ul>
        <li *ngFor="let tab of tabs">
            <a (click)="onTabClick(tab)" [ngClass]="{'router-link-active': tab.isSelected}" >{{tab.label}}</a>
            <span class='regtimetabtip' *ngIf="tab.counter">({{tab.counter}})</span>   
        </li>
    </ul>    
</aside>

<section class='application regtimecontainer'>

    <section class="regtime_tabs">

        <section [hidden]="!tabs[1].isSelected">
            <h2>Totaler</h2>
            <regtimetotals></regtimetotals>
        </section>

        <section [hidden]="!tabs[2].isSelected">
            <h2>Fleksitid</h2>
        </section>

        <section [hidden]="!tabs[3].isSelected">
            <h2>Arbeidsgivere</h2>
        </section>

        <section [hidden]="!tabs[4].isSelected">
            <h2>Ferie</h2>
        </section>

        <section [hidden]="!tabs[5].isSelected">
            <h2>Fravær</h2>
        </section>

        <section [hidden]="!tabs[0].isSelected">
    
            <header class="regtimetitle">
                <span>Registrere timer for {{userName}}</span>
                <select *ngFor="let item of workRelations">
                    <option>{{item.CompanyName}} : {{item.WorkPercentage}}% - {{item.Description}}</option>
                </select>
            </header>            

            <aside class="regtime_filters">

                <footer>
                    <table class='timeentry_toolbar'><tr>
                    <td>
                        <button class="secondary-button" (click)="onAddNew()">Ny timeføring</button>
                        <button *ngIf="hasUnsavedChanges()" class="good" (click)="save()">Lagre endringer</button>
                        <button *ngIf="hasUnsavedChanges()" class="bad" (click)="reset()">Avbryt</button>
                    </td> 
                    <td>Totalsum: {{timeSheet.totals.Minutes | min2hours}}</td>
                    </tr></table> 
                </footer>

                <ul>
                    <li *ngFor="let filter of filters">
                        <a (click)="onFilterClick(filter)" [ngClass]="{'router-link-active': filter.isSelected}" >{{filter.label}}</a> 
                    </li>
                </ul>    
                
            </aside>
            
            <article [attr.aria-busy]="busy" >
                
                <aside class='busy' *ngIf='busy'>Vent litt... stiller klokker og spisser blyanter..</aside>
            
                <table class='timeentriesTable' editable [config]="tableConfig" >
                    <thead>
                        <tr>
                            <th>Dato</th>
                            <th>Start</th>
                            <th>Slutt</th>
                            <th>Timeart</th>
                            <th>Beskrivelse</th>
                            <th>Prosjekt</th>
                            <th>Ordrenr.</th>
                            <th> </th>
                        </tr>
                    </thead>
                    <tbody *ngIf="timeSheet.currentRelation">
                        <tr *ngFor="let item of timeSheet.items; let i=index" [class.alternateRow]="item._alternate">
                            <td >{{item.Date | isotime:'DD.MM.YYYY'}}</td>
                            <td>{{item.StartTime | isotime:'HH:mm'}}</td>
                            <td>{{item.EndTime | isotime:'HH:mm'}}</td>
                            <td>{{item.Worktype ? item.Worktype.ID + ' - ' + item.Worktype.Name : ''}}</td>
                            <td>{{item.Description}}</td>
                            <td>{{item.Dimensions ? item.Dimensions.Project ? item.Dimensions.Project.ID + ' - ' + item.Dimensions.Project.Name : item.Dimensions.ProjectID : ''}}</td>
                            <td>{{item.CustomerOrder ? item.CustomerOrder.OrderNumber + ' - ' + item.CustomerOrder.CustomerName : item.CustomerOrderID }}</td>
                            <td class='timeSheet_actions'><button (click)="onRowActionClicked(i, item)"></button></td>
                        </tr>                            
                    </tbody>
                </table>    
            </article>

            <uni-save [actions]="actions"></uni-save>

        </section>

    </section>

</section>

