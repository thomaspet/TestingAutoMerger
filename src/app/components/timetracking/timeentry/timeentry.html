<uni-toolbar class="no-print" [config]="toolbarConfig" [saveactions]="actions"></uni-toolbar>

<section class="application">
    <uni-tabs [tabs]="tabs" [(activeIndex)]="activeTabIndex"></uni-tabs>

    <section class="timeentry-split-view" *ngIf="activeTabIndex === 0">
        <sidemenu
            [(periode)]="currentFilter"
            id="sidemenu_timetracking_component"
            (dateSelected)="onDateSelected($event)"
            (monthChanged)="onMonthChanged($event)"
            (templateSelected)="onTemplateSelected($event)">
        </sidemenu>

        <section class="uni-container timeentry-detail">
            <section class="header">
                <section class="header-left">
                    <strong>{{currentFilter.bigLabel}}</strong>

                    <progress class="timetracking_progress_bar"
                        [value]="percentage" max="100"
                        [ngClass]="{
                            '-is-complete': percentage >= 100,
                            '-is-empty': percentage === 0
                        }">
                    </progress>

                    <p class="timetracking_worked_today_text">
                        {{ workedToday }}
                    </p>
                </section>

                <section class="header-right">
                    <mat-form-field>
                        <mat-select [value]="currentFilter" (valueChange)="onFilterClick($event)" placeholder="Visning">
                            <mat-option *ngFor="let periode of filters" [value]="periode">
                                {{ periode.label }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </section>
            </section>

            <workeditor [timesheet]="timeSheet" (rowDeleted)="onEditChanged(true)"
                (valueChanged)="onEditChanged(true,$event)" >
            </workeditor>
        </section>
    </section>

    <section [hidden]="activeTabIndex === 0" class="uni-container">
        <timetracking-timetable
            *ngIf="activeTabIndex === 1"
            [lazy]="true"
            [workrelation]="timeSheet?.currentRelation"
            [eventcfg]="preSaveConfig">
        </timetracking-timetable>

        <regtimetotals [hidden]="activeTabIndex !== 2"></regtimetotals>

        <regtimebalance
            [hidden]="activeTabIndex !== 3"
            [eventcfg]="preSaveConfig"
            [workrelation]="timeSheet?.currentRelation"
            (valueChange)="onBalanceChanged($event)" >
        </regtimebalance>

        <vacation
            *ngIf="activeTabIndex === 4"
            (saved)="reloadFlex()"
            [workrelationid]="timeSheet?.currentRelation?.ID">
        </vacation>

        <teamwork-report *ngIf="activeTabIndex === 5"></teamwork-report>
    </section>

</section>
