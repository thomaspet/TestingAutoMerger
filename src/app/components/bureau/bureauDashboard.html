<uni-toolbar
    [config]="toolbarConfig"
    [saveactions]="saveActions">
</uni-toolbar>

<section class="application bureau-splitview">

    <section class="uni-container bureau-company-list">
        <section *ifFeaturePermission="'ui.bureau.company-groups'" class="bureau-filters">

            <button class="tertiary c2a" [matMenuTriggerFor]="groupMenu">
                {{activeGroup?.name}}
                <strong style="margin-left: 5px;">
                    {{activeGroup.companyKeys ? activeGroup.companyKeys.length : companies?.length}}
                </strong>
                <i class="material-icons">arrow_drop_down</i>
            </button>
            <mat-menu #groupMenu="matMenu" [overlapTrigger]="false" yPosition="below" xPosition="before">
                <button mat-menu-item *ngFor="let group of groups" (click)="activateGroup(group)">
                    <section class="bureau-group-menu-item">
                        <span>{{group.name}}</span>
                        <strong>
                            {{group.companyKeys ? group.companyKeys.length : companies?.length}}
                        </strong>
                    </section>

                </button>
            </mat-menu>

            <button class="tertiary" (click)="editGroups()">
                Rediger grupper
            </button>
        </section>

        <input class="bureau-search-input"
            [formControl]="searchControl"
            type="search"
            placeholder="SÃ¸k etter selskaper"
        />

        <ag-grid-wrapper
            [config]="tableConfig"
            [resource]="filteredCompanies"
            (rowSelectionChange)="onRowClick($event)">
        </ag-grid-wrapper>
    </section>

    <section class="uni-container bureau-company-details" [ngClass]="{'minimized': detailsMinimized}">
        <header>
            <span *ngIf="!detailsMinimized">{{highlightedCompany?.Name}}</span>

            <span class="details-toggle" role="button" (click)="detailsMinimized = !detailsMinimized">
                <i class="material-icons">
                    {{detailsMinimized ? 'keyboard_arrow_left' : 'keyboard_arrow_right'}}
                </i>
                {{detailsMinimized ? 'Vis detaljer' : 'Skjul detaljer'}}
            </span>
        </header>

        <section [hidden]="detailsMinimized">
            <uni-tabs [tabs]="detailsTabs" [useRouterLinkTabs]="true"></uni-tabs>
            <router-outlet></router-outlet>
        </section>
    </section>

</section>
