<section role="dialog" class="uni-redesign uni-modal">
    <header>Opprett nytt selskap</header>
    <article>
        <section *ngIf="busy" class="modal-spinner">
            <mat-spinner class="c2a"></mat-spinner>
        </section>

        <mat-horizontal-stepper [linear]="true" (selectionChange)="onStepChange($event)" #stepper [@.disabled]="true">
            <mat-step label="Velg lisens" [completed]="selectedContract && !companyLimitReached">
                <uni-select-license
                    *ngIf="currentPage === PageType.selectLicense"
                    [customers]="customers"
                    [(selectedContract)]="selectedContract"
                    (selectedContractChange)="onContractSelected($event)"
                ></uni-select-license>

                <small class="bad" *ngIf="companyLimitReached">
                    Demolisenser kan kun ha to selskaper, og valgt lisens har nÃ¥dd dette taket
                </small>
            </mat-step>

            <mat-step label="Fyll inn selskapsinformasjon" [completed]="companyInfo.valid">
                <uni-select-company
                    *ngIf="currentPage === PageType.selectCompany"
                    [(companyInfo)]="companyInfo"
                ></uni-select-company>
            </mat-step>

            <mat-step label="Velg produkter" [completed]="this.selectedProductsNames.length > 0">
                <uni-select-products
                    *ngIf="currentPage === PageType.selectProducts"
                    [(selectedProductsNames)]="selectedProductsNames"
                ></uni-select-products>
            </mat-step>
        </mat-horizontal-stepper>
    </article>

    <footer>
        <button class="back"
            (click)="stepper.previous()"
            [disabled]="currentPage === 0">
                Tilbake
        </button>

        <button class="c2a"
            *ngIf="currentPage < PageType.selectProducts"
            (click)="stepper.next()"
            [disabled]="!stepper.selected?.completed">
                Neste
        </button>

        <button class="good"
            *ngIf="currentPage === PageType.selectProducts"
            (click)="createCompany()">
                Opprett selskap
        </button>


        <button class="cancel" (click)="close()">Avbryt</button>
    </footer>
</section>
