<section class="authentication-component">
    <h1>Ny demo</h1>

    <small class="alert error" *ngIf="errorMessage">{{errorMessage}}</small>

    <!-- Signup step 1 -->
    <section class="step1" *ngIf="!confirmationCode">
        <small *ngIf="step1Success" class="alert good center">
            En e-post med mer informasjon vil bli sendt til:
            <br> {{step1Form.controls['Email'].value}}
        </small>

        <form #step1="ngForm" *ngIf="!step1Success" [formGroup]="step1Form" (ngSubmit)="submitStep1Form()">
            <label class="uni-label">
                <span>Selskapsnavn</span>
                <input type="text" autofocus formControlName="CompanyName" />
            </label>

            <label class="uni-label" for="displayNameInput">
                <span>Ditt navn</span>
                <input type="text" formControlName="DisplayName" />
            </label>


            <label class="uni-label">
                <span>E-post</span>
                <input type="email" formControlName="Email" />
            </label>


            <label class="uni-label">
                <span>Telefonnummer</span>
                <input type="tel" formControlName="PhoneNumber" />
            </label>

            <re-captcha class="recaptcha" formControlName="RecaptchaResponse"></re-captcha>

            <small class="privacy-info">
                Ved registrerering godtar du lagring og bruk av dine personlige data.
            </small>

            <button
                type="submit"
                class="c2a init-submit-button"
                [attr.aria-busy]="busy"
                [disabled]="busy || !step1.form.valid">
                Start registrering
            </button>
        </form>
    </section>

    <!-- Signup step 2 -->
    <section class="step2" *ngIf="confirmationCode">
        <small class="alert info" *ngIf="!errorMessage">
            Selskapet ditt er klart for oppretting. Vennligst fyll ut ønsket brukernavn og passord for å komme i gang.
        </small>

        <form #step2="ngForm" [formGroup]="step2Form" (ngSubmit)="submitStep2Form()">
            <label class="uni-label">
                <span>Brukernavn</span>
                <input type="text" autofocus
                    formControlName="UserName"
                    autocomplete="new-username"
                />

                <small class="bad">
                    {{step2Form?.get('UserName').errors?.usernameValidator}}
                </small>
            </label>

            <label class="uni-label">
                <span>Passord</span>
                <input type="password"
                    formControlName="Password"
                    autocomplete="new-password"
                />
            </label>

            <label class="uni-label">
                <span>Bekreft passord</span>
                <input type="password" formControlName="ConfirmPassword" />
                <small class="bad">{{step2Form?.get('ConfirmPassword').errors?.passwordMatchValidator}}</small>
            </label>

            <uni-password-guide *ngIf="step2Form?.controls"
                [passwordControl]="step2Form.controls.Password">
            </uni-password-guide>

            <button
                type="submit"
                class="c2a init-submit-button"
                [attr.aria-busy]="busy"
                [disabled]="busy || !step2.form.valid">
                Fullfør registrering
            </button>
        </form>
    </section>

    <section class="links">
        <a [routerLink]="['/init/login']">Tilbake til innlogging</a>
    </section>
</section>
