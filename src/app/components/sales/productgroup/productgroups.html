<uni-toolbar
    [config]="toolbarconfig"
    [saveactions]="toolbarActions">
</uni-toolbar>

<section class="product-groups application">
    <section class="tree-view-container">
        <button class="tertiary" [disabled]="selectedGroup && !selectedGroup.ID" (click)="createGroup(selectedGroup)">
            <i class="material-icons">create_new_folder</i>
            Ny undergruppe
        </button>

        <mat-tree [dataSource]="treeDataSource" [treeControl]="treeControl">
            <mat-tree-node *matTreeNodeDef="let node" (click)="selectGroup(node)">
                <li class="mat-tree-node">
                    <span [attr.aria-selected]="node.ID === selectedGroup?.ID">
                        {{node.Name}}
                    </span>
                </li>
            </mat-tree-node>

            <mat-nested-tree-node *matTreeNodeDef="let node; when: hasNestedChild">
                <li>
                    <div class="mat-tree-node">
                        <i class="material-icons" matTreeNodeToggle>
                            {{treeControl.isExpanded(node) ? 'arrow_drop_down' : 'arrow_right'}}
                        </i>
                        <span (click)="selectGroup(node)" [attr.aria-selected]="node.ID === selectedGroup?.ID">
                            {{node.Name}}
                        </span>
                    </div>
                    <ul [hidden]="!treeControl.isExpanded(node)">
                        <ng-container matTreeNodeOutlet></ng-container>
                    </ul>
                </li>
            </mat-nested-tree-node>
        </mat-tree>
    </section>

    <group-details
        *ngIf="selectedGroup"
        [(group)]="selectedGroup"
        (saveGroup)="saveGroup().subscribe()"
        (createChildGroup)="createGroup(selectedGroup)"
        (changes)="updateToolbar()"
        (deleteGroup)="deleteGroup()">
    </group-details>
</section>


