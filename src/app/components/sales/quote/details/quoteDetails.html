<uni-toolbar
    [config]="toolbarconfig"
    [saveactions]="saveActions"
    [commentsConfig]="commentsConfig"
    [selectConfig]="selectConfig"
    (selectValueChanged)="numberSeriesChange($event)">
</uni-toolbar>

<section class="application">
    <uni-tof-head
        [readonly]="readonly"
        [entityName]="'CustomerQuote'"
        [data]="quote"
        [currencyCodes]="currencyCodes"
        [projects]="projects"
        [distributionPlans]="distributionPlans"
        [reports]="reports"
        [sellers]="sellers"
        [contacts]="quote?.Customer?.Info?.Contacts"
        [dimensionTypes]="dimensionTypes"
        [currentUser]="currentUser"
        (dataChange)="onQuoteChange($event)">
    </uni-tof-head>

    <section class="uni-container tradeitem-container">
        <header>Varelinjer</header>

        <uni-tradeitem-table
            *ngIf="quote"
            [readonly]="readonly"
            [projects]="projects"
            [departments]="departments"
            [defaultTradeItem]="newQuoteItem"
            [vatDate]="quote.QuoteDate"
            [vatTypes]="vatTypes"
            [configStoreKey]="'sales.quote.tradeitemTable'"
            [(items)]="quoteItems"
            [currencyCodeID]="currencyCodeID"
            [currencyExchangeRate]="currencyExchangeRate"
            [dimensionTypes]="dimensionTypes"
            (itemsChange)="onTradeItemsChange($event)">
        </uni-tradeitem-table>

        <section class="freetext-and-summary">
            <section *ngIf="quote" class="freetext">
                <span>Fritekst</span>
                <textarea
                    [(ngModel)]="quote.FreeTxt"
                    (change)="onFreetextChange()"
                    [readonly]="readonly">
                </textarea>
            </section>

            <section class="tof-summary">
                <span class="currency-info">{{currencyInfo}}</span>

                <section class="vertical-summary" *ngIf="summaryLines?.length">
                    <section class="summary-line"
                        *ngFor="let summaryLine of summaryLines"
                        [ngClass]="{'total-sum': summaryLine.isTotalSum}">

                        <label>{{summaryLine.label}}</label>
                        <span>{{summaryLine.value}}</span>
                    </section>
                </section>
            </section>
        </section>
    </section>
</section>
