
<uni-toolbar [config]="{ title: 'Regnskapsinnstillinger' }" [saveactions]="saveActions"></uni-toolbar>

<section class="container-fluid uni-grid-container">

    <uni-tabs [tabs]="tabs" [(activeIndex)]="activeIndex" (tabClick)="updateTabAndUrl()"></uni-tabs>

    <ng-container *ngIf="activeIndex === 0">

        <!--  ELEKTRONISK FAKTURA -->
        <section class="row form-row">
            <section class="col-md-4">
                <section class="form-info-section">
                    <h1> {{ 'SETTINGS.ELECTRONIC_INVOICE' | translate }} </h1>
                    <p> {{ 'SETTINGS.ELECTRONIC_INVOICE_INFOTEXT' | translate }} </p>
                </section>
            </section>

            <section class="col-md-8">
                <section class="uni-card">
                    <section class="uni-card-content">
                        <ul class="electronic-invoice-items-list">
                            <li *ngFor="let item of eInvoiceItems">
                                <span class="item-name"> {{ item.name }} </span>
                                <i class="material-icons" *ngIf="item.isActivated"> check_circle_outline </i>
                                <span class="divider"></span>
                                <button class="secondary" [ngClass]="item.isActivated ? 'bad' : 'c2a'" (click)="onEInvoiceItemClick(item)">
                                    {{ item.isActivated ? 'Deaktiver' : 'Aktiver' }}
                                </button>
                            </li>
                        </ul>
                    </section>
                </section>
            </section>
        </section>

        <section class="row form-row">
            <section class="col-md-4">
                <section class="form-info-section">
                    <h1> {{ 'SETTINGS.ACCOUNTS' | translate }} </h1>
                    <p> {{ 'SETTINGS.ACCOUNTS_INFOTEXT' | translate }}  </p>
                </section>
            </section>

            <section class="col-md-8">
                <section class="uni-card">
                    <section class="uni-card-content">
                        <uni-form
                            class="two-column-layout"
                            [config]="{showLabelAbove: true, autoFocus: true}"
                            [fields]="fields$"
                            [model]="companySettings$"
                            (changeEvent)="isDirty = true">
                        </uni-form>
                    </section>
                </section>
            </section>
        </section>

        <section class="row form-row">
            <section class="col-md-4">
                <section class="form-info-section">
                    <h1> {{ 'SETTINGS.PERIOD_AND_MVA' | translate }} </h1>
                    <p> {{ 'SETTINGS.PERIODE_AND_VAT_INFOTEXT' | translate }}  </p>
                </section>
            </section>

            <section class="col-md-8">
                <section class="uni-card">
                    <section class="uni-card-content">
                        <uni-form
                            class="two-column-layout"
                            [config]="{showLabelAbove: true, autoFocus: true}"
                            [fields]="fieldsVat$"
                            [model]="companySettings$"
                            (changeEvent)="isDirty = true; periodSeriesChange($event);">
                        </uni-form>
                    </section>
                </section>
            </section>
        </section>

        <section class="row form-row last">
            <section class="col-md-4">
                <section class="form-info-section">
                    <h1> {{ 'SETTINGS.CURRENCY' | translate }} </h1>
                    <p> {{ 'SETTINGS.CURRENCY_INFOTEXT' | translate }}  </p>
                </section>
            </section>

            <section class="col-md-8">
                <section class="uni-card">
                    <section class="uni-card-content">
                        <uni-form
                            class="two-column-layout"
                            [config]="{showLabelAbove: true, autoFocus: true}"
                            [fields]="fieldsCurrency$"
                            [model]="companySettings$"
                            (changeEvent)="isDirty = true">
                        </uni-form>
                    </section>
                </section>
            </section>
        </section>
    </ng-container>

    <!-- VAT SETTINGS -->
    <vattype-settings-list [hidden]="activeIndex !== 1"></vattype-settings-list>

    <!-- VAT DEDUCTION SETTINGS -->
    <vat-deduction-settings [hidden]="activeIndex !== 2"></vat-deduction-settings>

    <!-- EIENDELER SETTINGS -->
    <eiendeler-settings [hidden]="activeIndex !== 3" [model]="companyAccountingSettings" (changeEvent)="onAssetSettingsChange()"></eiendeler-settings>
</section>
