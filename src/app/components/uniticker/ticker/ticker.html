<section *ngIf="ticker && prefetchDataLoaded && canShowTicker">
    <!-- Main ticker header -->
    <section *ngIf="!parentModel; else subTickerHeader" class="ticker-horizontal-menu">
        <a *ngFor="let action of getTickerActions()"
            (click)="onExecuteAction(action)"
            [hidden]="action.DisplayInActionBar != null && !action.DisplayInActionBar">
            {{action.Name}}
        </a>
    </section>
    <!-- Sub ticker header (ng else) -->
    <ng-template #subTickerHeader>
        <header class="sub-ticker-header">
            <span class="ticker-title">{{ticker.Name}}</span>

            <uni-context-menu
                *ngIf="contextMenuItems?.length && !newWithEntityAction"
                [actions]="contextMenuItems"
                class="ticker-context-menu">
            </uni-context-menu>

            <button
                *ngIf="openAction"
                type="button"
                class="tertiary"
                style="margin-left: auto"
                (click)="onExecuteAction(openAction)">
                <i class="material-icons">edit</i>
                Ã…pne
            </button>

            <button
                *ngIf="newWithEntityAction"
                type="button"
                class="tertiary"
                style="margin-left: auto"
                (click)="openNewWithEntity(newWithEntityAction)">
                <i class="material-icons">add</i>
                Ny
            </button>
        </header>
    </ng-template>

    <section class="ticker-data">
        <section class="data-container">
            <mat-checkbox
                class="ticker-default-filter"
                *ngIf="this.ticker && this.ticker.DefaultTableFilter && this.ticker.DefaultTableFilter.label"
                (change)="setupTableConfig()"
                [(ngModel)]="this.ticker.DefaultTableFilter.active">
                {{ this.ticker.DefaultTableFilter.label }}
            </mat-checkbox>
            <ag-grid-wrapper *ngIf="ticker.Type === 'table' && !groupingIsOn"
                class="borders"
                [resource]="lookupFunction"
                [columnSumResolver]="columnSumResolver"
                [config]="tableConfig"
                [useSpinner]="true"
                (columnsChange)="onColumnsChange($event)"
                (rowSelectionChange)="onRowSelectionChange($event)"
                (rowClick)="onRowClick($event)">
            </ag-grid-wrapper>

            <ag-grid-wrapper *ngIf="ticker.Type === 'table' && groupingIsOn"
                class="borders"
                [resource]="resource"
                [columnSumResolver]="columnSumResolver"
                [config]="tableConfig"
                (rowSelectionChange)="onRowSelectionChange($event)"
                (filtersChangeWhileGroup)="filtersChangeWhileGroup($event)"
                (rowClick)="onRowClick($event)">
            </ag-grid-wrapper>

            <div *ngIf="ticker.Type !== 'table'">
                <uni-ticker-detail-view
                    [ticker]="ticker"
                    [model]="model"
                    [columnOverrides]="columnOverrides">
                </uni-ticker-detail-view>
            </div>
        </section>
    </section>
</section>
